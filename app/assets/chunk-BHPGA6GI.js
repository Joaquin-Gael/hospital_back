import{a as m}from"./chunk-4W6XZAEZ.js";import{a as d,d as S}from"./chunk-3F3ZFDNX.js";import{C as o,W as n,aa as l,m as c,q as p}from"./chunk-U346BHW4.js";var s={GET_ALL:"medic/specialities",ADD:"medic/specialities/add",DELETE:i=>`medic/specialities/delete/${i}/`,UPDATE:i=>`medic/specialities/update/${i}/`};var v=class i{apiService=l(S);logger=l(d);storage=l(m);getSpecialities(){return this.apiService.get(s.GET_ALL).pipe(p(r=>r||[]),o(r=>this.handleError("Failed to fetch specialities",r)))}addSpeciality(r){return this.apiService.post(s.ADD,r).pipe(o(e=>this.handleError("Failed to create speciality",e)))}deleteSpeciality(r){return this.apiService.delete(s.DELETE(r)).pipe(o(e=>this.handleError(`Failed to delete speciality ${r}`,e)))}updateSpeciality(r,e){return this.apiService.patch(s.UPDATE(r),e).pipe(o(t=>this.handleError(`Failed to update speciality ${r}`,t)))}handleError(r,e){this.logger.error(r,e);let t="Ocurri\xF3 un error inesperado. Por favor, intenta de nuevo.";if(e instanceof Error)t=e.message;else if(typeof e=="object"&&e!==null&&"status"in e){let a=e;switch(a.status){case 400:t=a.error?.detail??"Solicitud inv\xE1lida. Verifica los datos enviados.";break;case 401:t=a.error?.detail??"No autorizado. Sesi\xF3n expirada.",this.storage.clearStorage();break;case 403:t=a.error?.detail??"No tienes permisos para realizar esta acci\xF3n.";break;case 404:t=a.error?.detail??"Recurso no encontrado.";break;default:t=a.error?.detail??"Error interno del servidor. Contacta al soporte."}}return c(()=>new Error(t))}static \u0275fac=function(e){return new(e||i)};static \u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})};export{v as a};
