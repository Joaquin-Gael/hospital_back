import{a as xe}from"./chunk-EERGVWMH.js";import"./chunk-QMYIRM4F.js";import{a as j}from"./chunk-2WAWTWTY.js";import{a as N}from"./chunk-UMTTYSJ2.js";import{a as se}from"./chunk-Y6I3CS6I.js";import{a as H}from"./chunk-BR3QFQIC.js";import"./chunk-GK5PG2NL.js";import"./chunk-R25INWIT.js";import"./chunk-HDR7MDZE.js";import"./chunk-O57RU464.js";import{a as k}from"./chunk-YOZKJIIB.js";import{d as le,h as de}from"./chunk-RTO3QJN4.js";import"./chunk-NSPTTQBB.js";import{b as re,c as ae}from"./chunk-ZGRDZCQA.js";import{c as ce,e as E,f as pe,g as _e,j as me,m as ue,n as fe,t as ge,v as he}from"./chunk-SZQKAXFT.js";import{$b as v,Bc as V,Cb as _,Eb as $,Fb as B,Gb as G,Hb as r,I as Z,Ib as a,Jb as p,Mb as b,Ob as m,Pb as c,S as w,Tb as ne,Ub as te,Uc as S,Vb as ie,Wa as I,Zb as l,_a as s,_b as M,aa as x,bc as oe,f as F,ha as T,ia as u,ja as f,kb as y,pb as g,sa as O,v as X,vb as U,wb as h,xb as ee,ya as D,yb as C}from"./chunk-MFDETKI4.js";import{a as J,b as K,d as Q}from"./chunk-4CLCTAJ7.js";var Ce=["fileInput"];function ve(o,e){o&1&&p(0,"app-loading-spinner",2),o&2&&h("message","Cargando datos del perfil...")}function Pe(o,e){if(o&1&&p(0,"img",11),o&2){let n=c(2);h("src",n.currentPhotoUrl,I)}}function Me(o,e){o&1&&(r(0,"div",12),p(1,"i",44),a())}function Oe(o,e){if(o&1){let n=b();r(0,"button",45),m("click",function(){u(n);let i=c(2);return f(i.removePhoto())}),p(1,"i",46),l(2," Eliminar foto "),a()}}function we(o,e){if(o&1&&(r(0,"div",35),p(1,"i",47),l(2),a()),o&2){let n=c(2);s(2),v(" ",n.getFieldError("address")," ")}}function ye(o,e){if(o&1&&(r(0,"div",35),p(1,"i",47),l(2),a()),o&2){let n=c(2);s(2),v(" ",n.getFieldError("telephone")," ")}}function Se(o,e){o&1&&p(0,"i",42)}function ke(o,e){o&1&&p(0,"i",43)}function De(o,e){if(o&1){let n=b();r(0,"div",3)(1,"h2",4),p(2,"i",5),l(3," Informaci\xF3n Personal "),a(),r(4,"p",6),l(5," Actualiza tu informaci\xF3n de contacto y foto de perfil "),a()(),r(6,"form",7),m("ngSubmit",function(){u(n);let i=c();return f(i.onSubmit())}),r(7,"div",8)(8,"div",9)(9,"div",10),g(10,Pe,1,1,"img",11)(11,Me,2,0,"div",12),r(12,"div",13)(13,"button",14),m("click",function(){u(n);let i=c();return f(i.triggerFileInput())}),p(14,"i",15),a()()(),r(15,"div",16)(16,"h4",17),l(17,"Foto de perfil"),a(),r(18,"p",18),l(19," JPG o PNG, m\xE1ximo 2MB "),a(),g(20,Oe,3,0,"button",19),a()(),r(21,"input",20,0),m("change",function(i){u(n);let d=c();return f(d.onFileSelected(i))}),a()(),r(23,"div",21)(24,"div",22)(25,"label",23),l(26," Nombre de usuario "),r(27,"span",24),l(28,"*"),a()(),p(29,"input",25),r(30,"div",26),p(31,"i",27),l(32," El nombre de usuario no puede ser modificado "),a()(),r(33,"div",22)(34,"label",28),l(35," Nombre "),r(36,"span",24),l(37,"*"),a()(),p(38,"input",29),r(39,"div",26),p(40,"i",27),l(41," El nombre no puede ser modificado "),a()(),r(42,"div",22)(43,"label",30),l(44," Apellido "),r(45,"span",24),l(46,"*"),a()(),p(47,"input",31),r(48,"div",26),p(49,"i",27),l(50," El apellido no puede ser modificado "),a()(),r(51,"div",32)(52,"label",33),l(53," Direcci\xF3n "),a(),p(54,"input",34),g(55,we,3,1,"div",35),a(),r(56,"div",32)(57,"label",36),l(58," Tel\xE9fono "),a(),p(59,"input",37),g(60,ye,3,1,"div",35),a()(),r(61,"div",38)(62,"button",39),m("click",function(){u(n);let i=c();return f(i.onCancel())}),p(63,"i",40),l(64," Cancelar "),a(),r(65,"button",41),g(66,Se,1,0,"i",42)(67,ke,1,0,"i",43),l(68),a()()()}if(o&2){let n,t,i=c();s(6),h("formGroup",i.profileForm),s(4),_(i.currentPhotoUrl?10:11),s(10),_(i.selectedFile||i.currentPhotoUrl?20:-1),s(35),_((n=i.profileForm.get("address"))!=null&&n.invalid&&((n=i.profileForm.get("address"))!=null&&n.touched)?55:-1),s(5),_((t=i.profileForm.get("telephone"))!=null&&t.invalid&&((t=i.profileForm.get("telephone"))!=null&&t.touched)?60:-1),s(2),h("disabled",i.isSubmitting),s(3),h("disabled",i.profileForm.invalid||i.isSubmitting),s(),_(i.isSubmitting?66:67),s(2),v(" ",i.isSubmitting?"Guardando...":"Guardar cambios"," ")}}var L=class o{ngAfterViewInit(){}fb=x(ge);logger=x(k);loading=!0;initialData=null;isSubmitting=!1;formSubmit=new O;formCancel=new O;fileInput;profileForm;selectedFile=null;currentPhotoUrl=null;dataLoaded=!1;ngOnInit(){this.initializeForm(),this.initialData&&!this.dataLoaded&&(this.loadInitialData(),this.dataLoaded=!0),this.loading=!1}ngOnChanges(e){if(e.initialData&&this.initialData!==void 0){if(!this.profileForm)return;this.dataLoaded||(this.loadInitialData(),this.dataLoaded=!0),this.loading=!1}}initializeForm(){this.profileForm=this.fb.group({username:[{value:"",disabled:!0},[E.required]],first_name:[{value:"",disabled:!0},[E.required]],last_name:[{value:"",disabled:!0},[E.required]],address:["",[E.maxLength(255)]],telephone:["",[E.pattern(/^\+?\d{9,15}$/)]]})}loadInitialData(){!this.initialData||!this.profileForm||(this.profileForm.patchValue({username:this.initialData.username||"",first_name:this.initialData.first_name||"",last_name:this.initialData.last_name||"",address:this.initialData.address||"",telephone:this.initialData.telephone||""}),this.initialData.img_profile&&(this.currentPhotoUrl=this.initialData.img_profile))}triggerFileInput(){this.fileInput.nativeElement.click()}onFileSelected(e){let n=e.target;if(n.files&&n.files.length>0){let t=n.files[0];if(!this.validateFile(t))return;this.selectedFile=t;let i=new FileReader;i.onload=d=>{this.currentPhotoUrl=d.target?.result},i.readAsDataURL(t)}}validateFile(e){if(!["image/jpeg","image/jpg","image/png"].includes(e.type))return this.logger.error("Tipo de archivo no v\xE1lido. Solo se permiten JPG y PNG."),!1;let t=2*1024*1024;return e.size>t?(this.logger.error("El archivo es demasiado grande. M\xE1ximo 2MB."),!1):!0}removePhoto(){this.selectedFile=null,this.currentPhotoUrl=null,this.fileInput&&(this.fileInput.nativeElement.value="")}onSubmit(){if(this.profileForm.valid){let e=K(J({},this.profileForm.value),{img_profile:this.selectedFile});this.formSubmit.emit(e)}else Object.keys(this.profileForm.controls).forEach(e=>{this.profileForm.get(e)?.markAsTouched()})}onCancel(){this.formCancel.emit()}getFieldError(e){let n=this.profileForm.get(e);if(n?.errors){if(n.errors.required)return"Este campo es obligatorio";if(n.errors.maxlength)return`M\xE1ximo ${n.errors.maxlength.requiredLength} caracteres`;if(n.errors.pattern)return"Formato de tel\xE9fono inv\xE1lido"}return""}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=y({type:o,selectors:[["app-profile-form"]],viewQuery:function(n,t){if(n&1&&ne(Ce,5),n&2){let i;te(i=ie())&&(t.fileInput=i.first)}},inputs:{initialData:"initialData",isSubmitting:"isSubmitting"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[T],decls:3,vars:1,consts:[["fileInput",""],[1,"profile-form"],[3,"message"],[1,"profile-form__header"],[1,"profile-form__title"],[1,"fas","fa-user","profile-form__title-icon"],[1,"profile-form__description"],["novalidate","",1,"profile-form__form",3,"ngSubmit","formGroup"],[1,"profile-form__photo-section"],[1,"profile-photo-upload"],[1,"profile-photo-upload__preview"],["alt","Foto de perfil actual",1,"profile-photo-upload__image",3,"src"],[1,"profile-photo-upload__placeholder"],[1,"profile-photo-upload__overlay"],["type","button",1,"profile-photo-upload__button",3,"click"],[1,"fas","fa-camera"],[1,"profile-photo-upload__info"],[1,"profile-photo-upload__title"],[1,"profile-photo-upload__hint"],["type","button",1,"profile-photo-upload__remove"],["type","file","accept",".jpg,.jpeg,.png",1,"profile-photo-upload__input",3,"change"],[1,"profile-form__fields"],[1,"form-field","form-field--readonly"],["for","username",1,"form-field__label"],[1,"form-field__required"],["type","text","id","username","formControlName","username","readonly","",1,"form-field__input"],[1,"form-field__hint"],[1,"fas","fa-info-circle"],["for","first_name",1,"form-field__label"],["type","text","id","first_name","formControlName","first_name","readonly","",1,"form-field__input"],["for","last_name",1,"form-field__label"],["type","text","id","last_name","formControlName","last_name","readonly","",1,"form-field__input"],[1,"form-field"],["for","address",1,"form-field__label"],["type","text","id","address","formControlName","address","placeholder","Ingresa tu direcci\xF3n",1,"form-field__input"],[1,"form-field__error"],["for","telephone",1,"form-field__label"],["type","tel","id","telephone","formControlName","telephone","placeholder","Ingresa tu n\xFAmero de tel\xE9fono",1,"form-field__input"],[1,"profile-form__actions"],["type","button",1,"profile-form__button","profile-form__button--secondary",3,"click","disabled"],[1,"fas","fa-times"],["type","submit",1,"profile-form__button","profile-form__button--primary",3,"disabled"],[1,"fas","fa-spinner","fa-spin"],[1,"fas","fa-save"],[1,"fas","fa-user","profile-photo-upload__placeholder-icon"],["type","button",1,"profile-photo-upload__remove",3,"click"],[1,"fas","fa-trash-alt"],[1,"fas","fa-exclamation-triangle"]],template:function(n,t){n&1&&(r(0,"div",1),g(1,ve,1,1,"app-loading-spinner",2)(2,De,69,9),a()),n&2&&(s(),_(t.loading?1:2))},dependencies:[S,he,me,ce,pe,_e,ue,fe,j],styles:[".icon[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;color:#fff}.btn--primary[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;color:#1f2937;border:1px solid #e5e7eb}.btn--outline[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn--danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{background-color:#ed2d2d}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background-color:transparent;color:#6b7280;border:none;cursor:pointer;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#f9fafb;color:#3b82f6}.btn-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:60px 20px;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;border-radius:50%;background-color:#3b82f61a;color:#3b82f6;margin-bottom:24px}.empty-state__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 8px;color:#1f2937}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 24px}.profile-form[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.profile-form__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e5e7eb}@media (max-width: 479px){.profile-form__header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px}}.profile-form__title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1f2937;margin:0 0 12px}.profile-form__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}@media (max-width: 479px){.profile-form__title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}}.profile-form__title-icon[_ngcontent-%COMP%]{font-size:32px;color:#3b82f6}@media (max-width: 479px){.profile-form__title-icon[_ngcontent-%COMP%]{font-size:28px}}.profile-form__description[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0;line-height:1.5}@media (max-width: 479px){.profile-form__description[_ngcontent-%COMP%]{font-size:14px}}.profile-form__form[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;box-shadow:0 4px 24px #00000014;border:1px solid #e5e7eb}@media (max-width: 479px){.profile-form__form[_ngcontent-%COMP%]{padding:20px;border-radius:12px}}.profile-form__photo-section[_ngcontent-%COMP%]{margin-bottom:40px;padding-bottom:32px;border-bottom:1px solid #f3f4f6}@media (max-width: 479px){.profile-form__photo-section[_ngcontent-%COMP%]{margin-bottom:32px;padding-bottom:24px}}.profile-form__fields[_ngcontent-%COMP%]{display:grid;gap:24px;margin-bottom:40px}@media (max-width: 479px){.profile-form__fields[_ngcontent-%COMP%]{gap:20px;margin-bottom:32px}}.profile-form__actions[_ngcontent-%COMP%]{padding-top:32px;border-top:1px solid #f3f4f6}.profile-form__actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;gap:16px}@media (max-width: 479px){.profile-form__actions[_ngcontent-%COMP%]{padding-top:24px;flex-direction:column;gap:12px}.profile-form__actions[_ngcontent-%COMP%]   .profile-form__button[_ngcontent-%COMP%]{width:100%}}.profile-form__button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:none;min-width:140px}.profile-form__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.profile-form__button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.profile-form__button--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;box-shadow:0 4px 14px #3b82f640}.profile-form__button--primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #3b82f659}@media (prefers-reduced-motion: reduce){.profile-form__button--primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:none}}.profile-form__button--primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.profile-form__button--secondary[_ngcontent-%COMP%]{background:transparent;color:#6b7280;border:2px solid #e5e7eb}.profile-form__button--secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f9fafb;color:#374151;border-color:#d1d5db}@media (hover: none) and (pointer: coarse){.profile-form__button--secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:transparent;color:#6b7280;border-color:#e5e7eb}}@media (max-width: 479px){.profile-form__button[_ngcontent-%COMP%]{padding:14px 20px;font-size:16px}}.profile-photo-upload[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:24px}@media (max-width: 479px){.profile-photo-upload[_ngcontent-%COMP%]{flex-direction:column;gap:16px;text-align:center}}.profile-photo-upload__preview[_ngcontent-%COMP%]{position:relative;width:120px;height:120px;border-radius:50%;overflow:hidden;border:4px solid #e5e7eb;background:#f9fafb;flex-shrink:0}@media (max-width: 479px){.profile-photo-upload__preview[_ngcontent-%COMP%]{width:100px;height:100px}}.profile-photo-upload__image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.profile-photo-upload__placeholder[_ngcontent-%COMP%]{width:100%;height:100%;background:linear-gradient(135deg,#f3f4f6,#e5e7eb);display:flex;align-items:center;justify-content:center}.profile-photo-upload__placeholder-icon[_ngcontent-%COMP%]{font-size:48px;color:#9ca3af}@media (max-width: 479px){.profile-photo-upload__placeholder-icon[_ngcontent-%COMP%]{font-size:40px}}.profile-photo-upload__overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0009;opacity:0;visibility:hidden;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.profile-photo-upload__preview[_ngcontent-%COMP%]:hover   .profile-photo-upload__overlay[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (hover: none) and (pointer: coarse){.profile-photo-upload__overlay[_ngcontent-%COMP%]{opacity:1;visibility:visible;background:#0006}}.profile-photo-upload__button[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;border:none;background:#ffffffe6;color:#3b82f6;font-size:20px;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center}.profile-photo-upload__button[_ngcontent-%COMP%]:hover{background:#fff;transform:scale(1.1)}@media (prefers-reduced-motion: reduce){.profile-photo-upload__button[_ngcontent-%COMP%]:hover{transform:none}}@media (max-width: 479px){.profile-photo-upload__button[_ngcontent-%COMP%]{width:40px;height:40px;font-size:16px}}.profile-photo-upload__info[_ngcontent-%COMP%]{flex:1}.profile-photo-upload__title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin:0 0 8px}@media (max-width: 479px){.profile-photo-upload__title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:6px}}.profile-photo-upload__hint[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 16px}@media (max-width: 479px){.profile-photo-upload__hint[_ngcontent-%COMP%]{font-size:13px;margin-bottom:12px}}.profile-photo-upload__remove[_ngcontent-%COMP%]{background:transparent;border:none;color:#ef4444;font-size:14px;font-weight:500;cursor:pointer;transition:color .2s ease}.profile-photo-upload__remove[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:6px}.profile-photo-upload__remove[_ngcontent-%COMP%]:hover{color:#dc2626}@media (max-width: 479px){.profile-photo-upload__remove[_ngcontent-%COMP%]{font-size:13px}}.profile-photo-upload__input[_ngcontent-%COMP%]{display:none}.form-field__label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:8px}@media (max-width: 479px){.form-field__label[_ngcontent-%COMP%]{font-size:13px;margin-bottom:6px}}.form-field__required[_ngcontent-%COMP%]{color:#ef4444;margin-left:4px}.form-field__input[_ngcontent-%COMP%]{width:100%;padding:12px 16px;border:2px solid #e5e7eb;border-radius:10px;font-size:14px;transition:all .2s ease;background:#fff}.form-field__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-field__input[_ngcontent-%COMP%]:disabled, .form-field__input[readonly][_ngcontent-%COMP%]{background:#f9fafb;color:#6b7280;cursor:not-allowed}.form-field__input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-color:#ef4444;box-shadow:0 0 0 3px #ef44441a}@media (max-width: 479px){.form-field__input[_ngcontent-%COMP%]{padding:14px 16px;font-size:16px}}.form-field--readonly[_ngcontent-%COMP%]   .form-field__input[_ngcontent-%COMP%]{background:#f9fafb;border-color:#e5e7eb;color:#6b7280}.form-field--readonly[_ngcontent-%COMP%]   .form-field__input[_ngcontent-%COMP%]:focus{border-color:#e5e7eb;box-shadow:none}.form-field__hint[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:#6b7280}.form-field__hint[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:6px}@media (max-width: 479px){.form-field__hint[_ngcontent-%COMP%]{font-size:11px}}.form-field__hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#9ca3af}@media (max-width: 479px){.form-field__hint[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}}.form-field__error[_ngcontent-%COMP%]{margin-top:6px;font-size:12px;color:#ef4444;font-weight:500}.form-field__error[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:6px}@media (max-width: 479px){.form-field__error[_ngcontent-%COMP%]{font-size:11px}}.form-field__error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:12px;color:#ef4444}@media (max-width: 479px){.form-field__error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:11px}}@media (prefers-reduced-motion: reduce){.profile-form__button[_ngcontent-%COMP%], .profile-photo-upload__overlay[_ngcontent-%COMP%], .profile-photo-upload__button[_ngcontent-%COMP%], .form-field__input[_ngcontent-%COMP%]{transition:none!important}.profile-form__button[_ngcontent-%COMP%]:hover, .profile-photo-upload__overlay[_ngcontent-%COMP%]:hover, .profile-photo-upload__button[_ngcontent-%COMP%]:hover, .form-field__input[_ngcontent-%COMP%]:hover{transform:none!important}}[_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:2px;border-radius:4px}"]})};function Ee(o,e){if(o&1){let n=b();r(0,"div",21),m("dragstart",function(i){let d=u(n).$implicit,P=c();return f(P.onDragStart(i,d))})("click",function(){let i=u(n).$implicit,d=c();return f(d.addToSelected(i))}),r(1,"div",22)(2,"span",23),l(3),a(),r(4,"span",24),l(5),a()(),r(6,"button",25),m("click",function(i){let d=u(n).$implicit,P=c();return i.stopPropagation(),f(P.addToSelected(d))}),p(7,"i",26),a()()}if(o&2){let n=e.$implicit;s(3),M(n.name),s(2),v("",n.discount,"% desc.")}}function Ie(o,e){o&1&&(r(0,"div",12),p(1,"i",27),r(2,"p",28),l(3,"Todas las obras sociales est\xE1n seleccionadas"),a()())}function ze(o,e){if(o&1&&(r(0,"span",14),l(1),a()),o&2){let n=c();s(),v(" (",n.selectedInsurances.length,") ")}}function Fe(o,e){if(o&1){let n=b();r(0,"div",29),m("dragstart",function(i){let d=u(n).$implicit,P=c();return f(P.onDragStart(i,d))})("click",function(){let i=u(n).$implicit,d=c();return f(d.removeFromSelected(i))}),r(1,"div",22)(2,"span",23),l(3),a(),r(4,"span",24),l(5),a()(),r(6,"button",30),m("click",function(i){let d=u(n).$implicit,P=c();return i.stopPropagation(),f(P.removeFromSelected(d))}),p(7,"i",31),a()()}if(o&2){let n=e.$implicit;s(3),M(n.name),s(2),v("",n.discount,"% desc.")}}function Te(o,e){o&1&&(r(0,"div",12),p(1,"i",32),r(2,"p",28),l(3,"Arrastra aqu\xED las obras sociales con las que tienes relacion"),a()())}function Ue(o,e){if(o&1&&(r(0,"div",20),p(1,"i",33),l(2),a()),o&2){let n=c();s(2),oe(" ",n.selectedInsurances.length," obra",n.selectedInsurances.length===1?"":"s"," social",n.selectedInsurances.length===1?"":"es"," seleccionada",n.selectedInsurances.length===1?"":"s"," ")}}var A=class o{logger=x(k);availableInsurances=[];selectedInsurances=[];insurancesChanged=new O;saveInsurances=new O;draggedInsurance=null;isDraggingOver=!1;initialSelectedIds=[];ngOnChanges(e){e.selectedInsurances&&this.selectedInsurances&&(this.initialSelectedIds=this.selectedInsurances.map(n=>n.id))}get hasChanges(){let e=this.selectedInsurances.map(t=>t.id).sort(),n=[...this.initialSelectedIds].sort();return e.length!==n.length?!0:e.some((t,i)=>t!==n[i])}trackByFn(e,n){return n.id}onDragStart(e,n){this.draggedInsurance=n,e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",n.id))}onDragOver(e){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move")}onDragEnter(e){e.preventDefault(),this.isDraggingOver=!0}onDragLeave(e){e.preventDefault(),this.isDraggingOver=!1}onDropToSelected(e){e.preventDefault(),this.isDraggingOver=!1,this.draggedInsurance&&(this.addToSelected(this.draggedInsurance),this.draggedInsurance=null)}onDropToAvailable(e){e.preventDefault(),this.isDraggingOver=!1,this.draggedInsurance&&(this.removeFromSelected(this.draggedInsurance),this.draggedInsurance=null)}addToSelected(e){let n=[...this.selectedInsurances,e],t=this.availableInsurances.filter(i=>i.id!==e.id);this.emitChanges(t,n)}removeFromSelected(e){let n=this.selectedInsurances.filter(i=>i.id!==e.id),t=[...this.availableInsurances,e];this.emitChanges(t,n)}emitChanges(e,n){this.insurancesChanged.emit({available:e,selected:n})}onSave(){let e=this.selectedInsurances.map(n=>n.id);this.saveInsurances.emit(e),this.initialSelectedIds=[...e]}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=y({type:o,selectors:[["app-health-insurance-manager"]],inputs:{availableInsurances:"availableInsurances",selectedInsurances:"selectedInsurances"},outputs:{insurancesChanged:"insurancesChanged",saveInsurances:"saveInsurances"},features:[T],decls:31,vars:9,consts:[[1,"health-insurance-manager"],[1,"health-insurance-manager__header"],[1,"health-insurance-manager__title"],[1,"fas","fa-hospital","health-insurance-manager__title-icon"],[1,"health-insurance-manager__description"],[1,"health-insurance-manager__content"],[1,"health-insurance-drag-drop"],[1,"health-insurance-column"],[1,"health-insurance-column__title"],[1,"fas","fa-hospital","health-insurance-column__icon"],[1,"health-insurance-list","health-insurance-list--available",3,"dragover","dragenter","dragleave","drop"],["draggable","true",1,"health-insurance-item","health-insurance-item--available"],[1,"health-insurance-empty"],[1,"fas","fa-check-circle","health-insurance-column__icon"],[1,"health-insurance-column__count"],[1,"health-insurance-list","health-insurance-list--selected",3,"dragover","dragenter","dragleave","drop"],["draggable","true",1,"health-insurance-item","health-insurance-item--selected"],[1,"health-insurance-manager__actions"],["type","button",1,"health-insurance-manager__button","health-insurance-manager__button--primary",3,"click","disabled"],[1,"fas","fa-save"],[1,"health-insurance-manager__status"],["draggable","true",1,"health-insurance-item","health-insurance-item--available",3,"dragstart","click"],[1,"health-insurance-item__content"],[1,"health-insurance-item__name"],[1,"health-insurance-item__discount"],["title","Agregar obra social",1,"health-insurance-item__action",3,"click"],[1,"fas","fa-plus"],[1,"fas","fa-star","health-insurance-empty__icon"],[1,"health-insurance-empty__text"],["draggable","true",1,"health-insurance-item","health-insurance-item--selected",3,"dragstart","click"],["title","Quitar obra social",1,"health-insurance-item__action","health-insurance-item__action--remove",3,"click"],[1,"fas","fa-times"],[1,"fas","fa-hand-point-up","health-insurance-empty__icon"],[1,"fas","fa-info-circle"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"i",3),l(4," Gestionar Obras Sociales "),a(),r(5,"p",4),l(6," Selecciona las obras sociales con las que tienes relaci\xF3n "),a()(),r(7,"div",5)(8,"div",6)(9,"div",7)(10,"h3",8),p(11,"i",9),l(12," Obras Sociales Disponibles "),a(),r(13,"div",10),m("dragover",function(d){return t.onDragOver(d)})("dragenter",function(d){return t.onDragEnter(d)})("dragleave",function(d){return t.onDragLeave(d)})("drop",function(d){return t.onDropToAvailable(d)}),B(14,Ee,8,2,"div",11,$,!1,Ie,4,0,"div",12),a()(),r(17,"div",7)(18,"h3",8),p(19,"i",13),l(20," Mis Obras Sociales "),g(21,ze,2,1,"span",14),a(),r(22,"div",15),m("dragover",function(d){return t.onDragOver(d)})("dragenter",function(d){return t.onDragEnter(d)})("dragleave",function(d){return t.onDragLeave(d)})("drop",function(d){return t.onDropToSelected(d)}),B(23,Fe,8,2,"div",16,$,!1,Te,4,0,"div",12),a()()(),r(26,"div",17)(27,"button",18),m("click",function(){return t.onSave()}),p(28,"i",19),l(29," Guardar cambios "),a(),g(30,Ue,3,4,"div",20),a()()()),n&2&&(s(13),C("health-insurance-list--drag-over",t.isDraggingOver),s(),G(t.availableInsurances),s(7),_(t.selectedInsurances.length>0?21:-1),s(),C("health-insurance-list--drag-over",t.isDraggingOver),s(),G(t.selectedInsurances),s(4),h("disabled",!t.hasChanges),s(3),_(t.selectedInsurances.length>0?30:-1))},dependencies:[S],styles:[".icon[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;color:#fff}.btn--primary[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;color:#1f2937;border:1px solid #e5e7eb}.btn--outline[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn--danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{background-color:#ed2d2d}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background-color:transparent;color:#6b7280;border:none;cursor:pointer;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#f9fafb;color:#3b82f6}.btn-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:60px 20px;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;border-radius:50%;background-color:#3b82f61a;color:#3b82f6;margin-bottom:24px}.empty-state__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 8px;color:#1f2937}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 24px}.health-insurance-manager[_ngcontent-%COMP%]{max-width:1000px;margin:0 auto}.health-insurance-manager__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e5e7eb}@media (max-width: 479px){.health-insurance-manager__header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px}}.health-insurance-manager__title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1f2937;margin:0 0 12px}.health-insurance-manager__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}@media (max-width: 479px){.health-insurance-manager__title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}}.health-insurance-manager__title-icon[_ngcontent-%COMP%]{font-size:32px;color:#059669}@media (max-width: 479px){.health-insurance-manager__title-icon[_ngcontent-%COMP%]{font-size:28px}}.health-insurance-manager__description[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0;line-height:1.5}@media (max-width: 479px){.health-insurance-manager__description[_ngcontent-%COMP%]{font-size:14px}}.health-insurance-manager__content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;box-shadow:0 4px 24px #00000014;border:1px solid #e5e7eb}@media (max-width: 479px){.health-insurance-manager__content[_ngcontent-%COMP%]{padding:20px;border-radius:12px}}.health-insurance-manager__actions[_ngcontent-%COMP%]{margin-top:32px;padding-top:24px;border-top:1px solid #f3f4f6}.health-insurance-manager__actions[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px}@media (max-width: 479px){.health-insurance-manager__actions[_ngcontent-%COMP%]{flex-direction:column;gap:12px;align-items:stretch}}.health-insurance-manager__button[_ngcontent-%COMP%]{padding:12px 24px;border-radius:10px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);border:none;min-width:160px}.health-insurance-manager__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.health-insurance-manager__button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none!important}.health-insurance-manager__button--primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#059669,#047857);color:#fff;box-shadow:0 4px 14px #05966940}.health-insurance-manager__button--primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #05966959}@media (prefers-reduced-motion: reduce){.health-insurance-manager__button--primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:none}}.health-insurance-manager__button--primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}@media (max-width: 479px){.health-insurance-manager__button[_ngcontent-%COMP%]{width:100%;padding:14px 20px;font-size:16px}}.health-insurance-manager__status[_ngcontent-%COMP%]{font-size:14px;color:#059669;font-weight:500}.health-insurance-manager__status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}@media (max-width: 479px){.health-insurance-manager__status[_ngcontent-%COMP%]{justify-content:center;font-size:13px}}.health-insurance-manager__status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:16px}@media (max-width: 479px){.health-insurance-manager__status[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}}.health-insurance-drag-drop[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;min-height:400px}@media (min-width: 480px) and (max-width: 767px){.health-insurance-drag-drop[_ngcontent-%COMP%]{gap:20px;min-height:350px}}@media (max-width: 479px){.health-insurance-drag-drop[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:16px;min-height:600px}}.health-insurance-column__title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#1f2937;margin:0 0 16px;padding:0 4px}.health-insurance-column__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}@media (max-width: 479px){.health-insurance-column__title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px}}.health-insurance-column__icon[_ngcontent-%COMP%]{font-size:20px;color:#3b82f6;flex-shrink:0}.health-insurance-column__icon.fa-check-circle[_ngcontent-%COMP%]{color:#059669}@media (max-width: 479px){.health-insurance-column__icon[_ngcontent-%COMP%]{font-size:18px}}.health-insurance-column__count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#059669;background:#d1fae5;padding:4px 10px;border-radius:12px;margin-left:auto}@media (max-width: 479px){.health-insurance-column__count[_ngcontent-%COMP%]{font-size:12px;padding:3px 8px}}.health-insurance-list[_ngcontent-%COMP%]{background:#fff;border:2px dashed #d1d5db;border-radius:12px;padding:16px;min-height:320px;transition:all .3s ease;position:relative;overflow-y:auto;max-height:500px}@media (max-width: 479px){.health-insurance-list[_ngcontent-%COMP%]{min-height:250px;max-height:300px;padding:12px;border-radius:8px}}@media (min-width: 480px) and (max-width: 767px){.health-insurance-list[_ngcontent-%COMP%]{min-height:280px;max-height:400px}}.health-insurance-list--available[_ngcontent-%COMP%]{border-color:#3b82f6}.health-insurance-list--available[_ngcontent-%COMP%]:hover{border-color:#2563eb;background:#f8faff}@media (hover: none) and (pointer: coarse){.health-insurance-list--available[_ngcontent-%COMP%]:hover{background:#fff}}.health-insurance-list--selected[_ngcontent-%COMP%]{border-color:#059669}.health-insurance-list--selected[_ngcontent-%COMP%]:hover{border-color:#047857;background:#f0fdf4}@media (hover: none) and (pointer: coarse){.health-insurance-list--selected[_ngcontent-%COMP%]:hover{background:#fff}}.health-insurance-list--drag-over[_ngcontent-%COMP%]{border-style:solid;background:linear-gradient(135deg,#f0f9ff,#e0f2fe);transform:scale(1.02);box-shadow:0 8px 25px #3b82f626}@media (prefers-reduced-motion: reduce){.health-insurance-list--drag-over[_ngcontent-%COMP%]{transform:none}}.health-insurance-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}@media (max-width: 479px){.health-insurance-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:4px}}.health-insurance-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f5f9;border-radius:3px}.health-insurance-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#94a3b8;border-radius:3px}.health-insurance-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#6b7280}.health-insurance-item[_ngcontent-%COMP%]{padding:12px 16px;margin-bottom:8px;border-radius:8px;cursor:grab;transition:all .2s ease;border:1px solid transparent;-webkit-user-select:none;user-select:none;display:flex;align-items:center;justify-content:space-between}.health-insurance-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.health-insurance-item[_ngcontent-%COMP%]:active{cursor:grabbing}@media (max-width: 479px){.health-insurance-item[_ngcontent-%COMP%]{padding:10px 12px;margin-bottom:6px}}@media (prefers-reduced-motion: reduce){.health-insurance-item[_ngcontent-%COMP%]{transition:none}}.health-insurance-item--available[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border-color:#e2e8f0}.health-insurance-item--available[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#e0f2fe,#bae6fd);border-color:#0ea5e9;transform:translateY(-2px);box-shadow:0 4px 12px #0ea5e926}@media (prefers-reduced-motion: reduce){.health-insurance-item--available[_ngcontent-%COMP%]:hover{transform:none}}@media (hover: none) and (pointer: coarse){.health-insurance-item--available[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f8fafc,#f1f5f9);transform:none;box-shadow:none}}.health-insurance-item--selected[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f0fdf4,#dcfce7);border-color:#bbf7d0}.health-insurance-item--selected[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#ecfdf5,#d1fae5);border-color:#059669;transform:translateY(-2px);box-shadow:0 4px 12px #05966926}@media (prefers-reduced-motion: reduce){.health-insurance-item--selected[_ngcontent-%COMP%]:hover{transform:none}}@media (hover: none) and (pointer: coarse){.health-insurance-item--selected[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#f0fdf4,#dcfce7);transform:none;box-shadow:none}}.health-insurance-item__content[_ngcontent-%COMP%]{gap:4px;flex:1;min-width:0}.health-insurance-item__content[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 479px){.health-insurance-item__content[_ngcontent-%COMP%]{gap:2px}}.health-insurance-item__name[_ngcontent-%COMP%]{font-weight:500;color:#1f2937;font-size:14px;line-height:1.3;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media (max-width: 479px){.health-insurance-item__name[_ngcontent-%COMP%]{font-size:12px}}.health-insurance-item__discount[_ngcontent-%COMP%]{font-size:12px;color:#059669;font-weight:500;background:#d1fae5;padding:2px 8px;border-radius:4px;align-self:flex-start}@media (max-width: 479px){.health-insurance-item__discount[_ngcontent-%COMP%]{font-size:10px;padding:1px 4px}}.health-insurance-item__action[_ngcontent-%COMP%]{width:32px;height:32px;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;transition:all .2s ease;background:#3b82f6;color:#fff;flex-shrink:0;display:flex;align-items:center;justify-content:center}.health-insurance-item__action[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.health-insurance-item__action[_ngcontent-%COMP%]:hover{background-color:#2563eb}.health-insurance-item__action[_ngcontent-%COMP%]:hover{transform:scale(1.1)}@media (prefers-reduced-motion: reduce){.health-insurance-item__action[_ngcontent-%COMP%]:hover{transform:none}}@media (hover: none) and (pointer: coarse){.health-insurance-item__action[_ngcontent-%COMP%]:hover{transform:none}}.health-insurance-item__action--remove[_ngcontent-%COMP%]{background:#ef4444;font-size:16px}.health-insurance-item__action--remove[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1)}.health-insurance-item__action--remove[_ngcontent-%COMP%]:hover{background-color:#dc2626}@media (max-width: 479px){.health-insurance-item__action[_ngcontent-%COMP%]{width:28px;height:28px;font-size:14px}}@media (hover: none) and (pointer: coarse){.health-insurance-item__action[_ngcontent-%COMP%]{width:36px;height:36px}}.health-insurance-empty[_ngcontent-%COMP%]{height:100%;min-height:200px;text-align:center;color:#6b7280;display:flex;align-items:center;justify-content:center}.health-insurance-empty[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 479px){.health-insurance-empty[_ngcontent-%COMP%]{min-height:150px}}.health-insurance-empty__icon[_ngcontent-%COMP%]{font-size:40px;margin-bottom:16px;opacity:.7}@media (max-width: 479px){.health-insurance-empty__icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}}.health-insurance-empty__text[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;margin:0;max-width:200px}@media (max-width: 479px){.health-insurance-empty__text[_ngcontent-%COMP%]{font-size:13px;max-width:180px}}@media (prefers-reduced-motion: reduce){.health-insurance-item[_ngcontent-%COMP%], .health-insurance-list[_ngcontent-%COMP%], .health-insurance-item__action[_ngcontent-%COMP%], .health-insurance-manager__button[_ngcontent-%COMP%]{transition:none!important;transform:none!important}}[_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:2px;border-radius:4px}@media (max-width: 360px){.health-insurance-item__content[_ngcontent-%COMP%]{gap:2px}.health-insurance-item__name[_ngcontent-%COMP%]{font-size:11px}.health-insurance-item__discount[_ngcontent-%COMP%]{font-size:9px;padding:1px 3px}.health-insurance-item__action[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px}.health-insurance-empty[_ngcontent-%COMP%]{min-height:120px}.health-insurance-empty__icon[_ngcontent-%COMP%]{font-size:28px;margin-bottom:8px}.health-insurance-empty__text[_ngcontent-%COMP%]{font-size:12px;max-width:160px}}"]})};function Ve(o,e){if(o&1&&(r(0,"div",5)(1,"div",29),p(2,"div",30),a(),r(3,"span",31),l(4),a()()),o&2){let n=c();s(2),ee("width",n.uploadProgress(),"%"),s(2),v("",n.uploadProgress(),"% completado")}}function He(o,e){o&1&&(r(0,"i",15),l(1,"check_circle"),a())}function je(o,e){o&1&&(r(0,"div",17)(1,"i",32),l(2,"upload_file"),a(),r(3,"p",33)(4,"strong"),l(5,"Haz clic aqu\xED"),a(),l(6," o arrastra la imagen del frente "),a(),r(7,"p",34),l(8," JPEG, PNG o WebP, m\xE1ximo 5MB "),a()())}function Ne(o,e){if(o&1&&(p(0,"img",37),r(1,"div",38)(2,"span",39),l(3),a(),r(4,"span",40),l(5),a()()),o&2){let n=c(2);h("src",n.frontDni().preview,I),s(3),M(n.frontDni().file.name),s(2),M(n.getFileSize(n.frontDni()))}}function Le(o,e){if(o&1){let n=b();r(0,"div",35)(1,"i",41),l(2,"warning"),a(),r(3,"p",42),l(4),a(),r(5,"button",43),m("click",function(i){return u(n),c(2).triggerFileInput("front"),f(i.stopPropagation())}),l(6," Intentar de nuevo "),a()()}if(o&2){let n=c(2);s(4),M(n.frontDni().errorMessage)}}function Ae(o,e){if(o&1){let n=b();r(0,"div",18),g(1,Ne,6,3)(2,Le,7,1,"div",35),r(3,"button",36),m("click",function(i){return u(n),c().removeFile("front"),f(i.stopPropagation())}),r(4,"i",10),l(5,"close"),a()()()}if(o&2){let n=c();s(),_(n.frontDni().isValid&&n.frontDni().preview?1:-1),s(),_(n.frontDni().isValid?-1:2),s(),h("disabled",n.isSubmitting())}}function Re(o,e){o&1&&(r(0,"i",15),l(1,"check_circle"),a())}function $e(o,e){o&1&&(r(0,"div",17)(1,"i",32),l(2,"upload_file"),a(),r(3,"p",33)(4,"strong"),l(5,"Haz clic aqu\xED"),a(),l(6," o arrastra la imagen del dorso "),a(),r(7,"p",34),l(8," JPEG, PNG o WebP, m\xE1ximo 5MB "),a()())}function Be(o,e){if(o&1&&(p(0,"img",45),r(1,"div",38)(2,"span",39),l(3),a(),r(4,"span",40),l(5),a()()),o&2){let n=c(2);h("src",n.backDni().preview,I),s(3),M(n.backDni().file.name),s(2),M(n.getFileSize(n.backDni()))}}function Ge(o,e){if(o&1){let n=b();r(0,"div",35)(1,"i",41),l(2,"warning"),a(),r(3,"p",42),l(4),a(),r(5,"button",43),m("click",function(i){return u(n),c(2).triggerFileInput("back"),f(i.stopPropagation())}),l(6," Intentar de nuevo "),a()()}if(o&2){let n=c(2);s(4),M(n.backDni().errorMessage)}}function Ye(o,e){if(o&1){let n=b();r(0,"div",18),g(1,Be,6,3)(2,Ge,7,1,"div",35),r(3,"button",44),m("click",function(i){return u(n),c().removeFile("back"),f(i.stopPropagation())}),r(4,"i",10),l(5,"close"),a()()()}if(o&2){let n=c();s(),_(n.backDni().isValid&&n.backDni().preview?1:-1),s(),_(n.backDni().isValid?-1:2),s(),h("disabled",n.isSubmitting())}}function qe(o,e){o&1&&(r(0,"i",24),l(1,"hourglass_top"),a())}function We(o,e){o&1&&(r(0,"i",10),l(1,"cloud_upload"),a())}function Je(o,e){o&1&&(r(0,"div",25)(1,"i",10),l(2,"check_circle"),a(),r(3,"span"),l(4,"Ambas im\xE1genes est\xE1n listas para enviar"),a()())}function Ke(o,e){o&1&&l(0," Falta la imagen del frente ")}function Qe(o,e){o&1&&l(0," Falta la imagen del dorso ")}function Xe(o,e){o&1&&l(0," Verifica que las im\xE1genes sean v\xE1lidas ")}function Ze(o,e){if(o&1&&(r(0,"div",26)(1,"i",10),l(2,"warning"),a(),r(3,"span"),g(4,Ke,1,0)(5,Qe,1,0)(6,Xe,1,0),a()()),o&2){let n,t=c();s(4),_(t.frontDni()?t.backDni()?!((n=t.frontDni())!=null&&n.isValid)||!((n=t.backDni())!=null&&n.isValid)?6:-1:5:4)}}function en(o,e){o&1&&(r(0,"div",27)(1,"i",10),l(2,"upload"),a(),r(3,"span"),l(4,"Verificando documentos..."),a()())}function nn(o,e){if(o&1){let n=b();r(0,"button",46),m("click",function(){u(n);let i=c();return f(i.retryUpload())}),r(1,"i",10),l(2,"refresh"),a(),l(3," Reintentar verificaci\xF3n "),a()}}var R=class o{http=x(ae);notificationService=x(H);logger=x(k);userService=x(N);destroy$=new F;uploadSuccess=new O;uploadError=new O;frontDni=D(null);backDni=D(null);isSubmitting=D(!1);isDraggingFront=D(!1);isDraggingBack=D(!1);canSubmit=V(()=>{let e=this.frontDni(),n=this.backDni();return!!(e?.isValid&&n?.isValid&&!this.isSubmitting())});hasFiles=V(()=>!!(this.frontDni()||this.backDni()));uploadProgress=V(()=>{let e=this.frontDni(),n=this.backDni(),t=0;return e?.isValid&&(t+=50),n?.isValid&&(t+=50),t});MAX_FILE_SIZE=5*1024*1024;ALLOWED_TYPES=["image/jpeg","image/jpg","image/png","image/webp"];ALLOWED_EXTENSIONS=[".jpg",".jpeg",".png",".webp"];ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.cleanupPreviews()}onDragOverFront(e){e.preventDefault(),e.stopPropagation(),this.isDraggingFront.set(!0)}onDragLeaveFront(e){e.preventDefault(),e.stopPropagation(),this.isDraggingFront.set(!1)}onDropFront(e){e.preventDefault(),e.stopPropagation(),this.isDraggingFront.set(!1);let n=e.dataTransfer?.files;n?.length&&this.handleFileSelection(n[0],"front")}onDragOverBack(e){e.preventDefault(),e.stopPropagation(),this.isDraggingBack.set(!0)}onDragLeaveBack(e){e.preventDefault(),e.stopPropagation(),this.isDraggingBack.set(!1)}onDropBack(e){e.preventDefault(),e.stopPropagation(),this.isDraggingBack.set(!1);let n=e.dataTransfer?.files;n?.length&&this.handleFileSelection(n[0],"back")}onFileSelected(e,n){let t=e.target;t.files?.length&&this.handleFileSelection(t.files[0],n),t.value=""}handleFileSelection(e,n){return Q(this,null,function*(){try{let t=this.validateFile(e);if(t.isValid){let i=yield this.createFilePreview(e),d={file:e,preview:i,isValid:!0};this.setDniFile(n,d)}else{let i={file:e,preview:"",isValid:!1,errorMessage:t.errorMessage};this.setDniFile(n,i),this.showValidationError(t.errorMessage)}}catch(t){this.logger.error("Error processing file:",t),this.notificationService.error("Error al procesar el archivo")}})}createFilePreview(e){return new Promise((n,t)=>{let i=new FileReader;i.onload=d=>{n(d.target?.result)},i.onerror=()=>{t(new Error("Error reading file"))},i.readAsDataURL(e)})}validateFile(e){if(!this.ALLOWED_TYPES.includes(e.type)){let n=e.name.toLowerCase().slice(e.name.lastIndexOf("."));if(!this.ALLOWED_EXTENSIONS.includes(n))return{isValid:!1,errorMessage:"Solo se permiten archivos JPEG, PNG y WebP"}}return e.size>this.MAX_FILE_SIZE?{isValid:!1,errorMessage:`El archivo no puede superar los ${this.formatFileSize(this.MAX_FILE_SIZE)}`}:{isValid:!0}}formatFileSize(e){if(e===0)return"0 Bytes";let n=1024,t=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(2))+" "+t[i]}setDniFile(e,n){let t=e==="front"?this.frontDni():this.backDni();t?.preview&&t.preview.startsWith("blob:")&&URL.revokeObjectURL(t.preview),e==="front"?this.frontDni.set(n):this.backDni.set(n)}removeFile(e){let n=e==="front"?this.frontDni():this.backDni();n?.preview&&n.preview.startsWith("blob:")&&URL.revokeObjectURL(n.preview),e==="front"?this.frontDni.set(null):this.backDni.set(null)}onSubmit(){if(!this.canSubmit()){this.showValidationError("Por favor selecciona ambas im\xE1genes del DNI v\xE1lidas");return}this.isSubmitting.set(!0);let e=this.frontDni().file,n=this.backDni().file;this.userService.verifyDni(e,n).pipe(w(this.destroy$),Z(()=>this.isSubmitting.set(!1))).subscribe({next:t=>{this.handleUploadSuccess(t)},error:t=>{this.handleUploadError(t)}})}handleUploadSuccess(e){this.logger.debug("DNI upload successful:",e),this.notificationService.success("DNI verificado correctamente",{duration:5e3,action:{label:"Ver detalles",action:()=>this.showUploadDetails(e)}}),this.uploadSuccess.emit({success:!0,data:e,message:"DNI verificado correctamente"}),this.resetForm()}handleUploadError(e){this.logger.error("DNI upload error:",e);let n=this.getErrorMessage(e);this.notificationService.error("Error al verificar el DNI",{duration:7e3,action:{label:"Reintentar",action:()=>this.onSubmit()}}),this.uploadError.emit(n)}getErrorMessage(e){if(e instanceof re)switch(e.status){case 400:return e.error?.detail||"Datos inv\xE1lidos en la solicitud";case 413:return"Los archivos son demasiado grandes";case 422:return e.error?.detail||"Error de validaci\xF3n en los archivos";case 429:return"Demasiadas solicitudes. Espera un momento antes de reintentar";case 500:return"Error del servidor. Int\xE9ntalo m\xE1s tarde";case 503:return"Servicio no disponible temporalmente";default:return e.error?.message||"Error inesperado del servidor"}return e.name==="TimeoutError"?"Tiempo de espera agotado. Verifica tu conexi\xF3n":"Error al procesar la solicitud. Int\xE9ntalo nuevamente"}showValidationError(e){this.notificationService.warning(e,{duration:5e3})}showUploadDetails(e){this.logger.debug("Upload details:",e)}resetForm(){this.cleanupPreviews(),this.frontDni.set(null),this.backDni.set(null),this.isDraggingFront.set(!1),this.isDraggingBack.set(!1)}cleanupPreviews(){[this.frontDni(),this.backDni()].forEach(e=>{e?.preview&&e.preview.startsWith("blob:")&&URL.revokeObjectURL(e.preview)})}triggerFileInput(e){document.getElementById(`${e}-file-input`)?.click()}getFileSize(e){return e?this.formatFileSize(e.file.size):""}retryUpload(){this.canSubmit()&&this.onSubmit()}onKeydown(e,n){(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),this.triggerFileInput(n))}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=y({type:o,selectors:[["app-dni-uploader"]],outputs:{uploadSuccess:"uploadSuccess",uploadError:"uploadError"},decls:52,vars:37,consts:[[1,"dni-uploader"],[1,"dni-uploader__header"],[1,"dni-uploader__title"],[1,"material-icons","dni-uploader__title-icon"],[1,"dni-uploader__description"],[1,"dni-uploader__progress"],[1,"dni-uploader__content"],[1,"dni-uploader__info"],[1,"dni-uploader__tips"],[1,"dni-uploader__tips-title"],[1,"material-icons"],[1,"dni-uploader__tips-list"],[1,"dni-uploader__container"],[1,"dni-uploader__section"],[1,"dni-uploader__section-title"],[1,"material-icons","dni-uploader__section-check"],["tabindex","0","role","button",1,"dni-uploader__dropzone",3,"dragover","dragleave","drop","click","keydown"],[1,"dni-uploader__dropzone-content"],[1,"dni-uploader__preview"],["type","file","id","front-file-input","accept",".jpg,.jpeg,.png,.webp","aria-hidden","true",1,"dni-uploader__file-input",3,"change","disabled"],["type","file","id","back-file-input","accept",".jpg,.jpeg,.png,.webp","aria-hidden","true",1,"dni-uploader__file-input",3,"change","disabled"],[1,"dni-uploader__actions"],["type","button",1,"dni-uploader__submit-btn",3,"click","disabled"],[1,"dni-uploader__submit-btn-content"],[1,"material-icons","dni-uploader__submit-spinner"],[1,"dni-uploader__status","dni-uploader__status--success"],[1,"dni-uploader__status","dni-uploader__status--warning"],[1,"dni-uploader__status","dni-uploader__status--info"],["type","button",1,"dni-uploader__retry-all-btn"],[1,"dni-uploader__progress-bar"],[1,"dni-uploader__progress-fill"],[1,"dni-uploader__progress-text"],[1,"material-icons","dni-uploader__icon"],[1,"dni-uploader__dropzone-text"],[1,"dni-uploader__dropzone-subtext"],[1,"dni-uploader__preview-error"],["type","button","title","Eliminar imagen","aria-label","Eliminar imagen del frente",1,"dni-uploader__remove-btn",3,"click","disabled"],["alt","Preview frente DNI","loading","lazy",1,"dni-uploader__preview-image",3,"src"],[1,"dni-uploader__file-info"],[1,"dni-uploader__file-name"],[1,"dni-uploader__file-size"],[1,"material-icons","dni-uploader__error-icon"],[1,"dni-uploader__error-text"],["type","button",1,"dni-uploader__retry-btn",3,"click"],["type","button","title","Eliminar imagen","aria-label","Eliminar imagen del dorso",1,"dni-uploader__remove-btn",3,"click","disabled"],["alt","Preview dorso DNI","loading","lazy",1,"dni-uploader__preview-image",3,"src"],["type","button",1,"dni-uploader__retry-all-btn",3,"click"]],template:function(n,t){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"h2",2)(3,"i",3),l(4,"badge"),a(),l(5," Verificaci\xF3n de DNI "),a(),r(6,"p",4),l(7," Sube las im\xE1genes del frente y dorso de tu DNI para completar la verificaci\xF3n de identidad. "),a(),g(8,Ve,5,3,"div",5),a(),r(9,"div",6)(10,"div",7)(11,"div",8)(12,"h5",9)(13,"i",10),l(14,"lightbulb"),a(),l(15," Consejos para mejores resultados "),a(),r(16,"ul",11)(17,"li"),l(18,"Aseg\xFArate de que la imagen est\xE9 bien iluminada"),a(),r(19,"li"),l(20,"Evita reflejos y sombras sobre el documento"),a(),r(21,"li"),l(22,"Mant\xE9n el DNI completamente visible en la imagen"),a(),r(23,"li"),l(24,"Usa una superficie plana y contraste adecuado"),a()()()(),r(25,"div",12)(26,"div",13)(27,"h4",14),l(28," Frente del DNI "),g(29,He,2,0,"i",15),a(),r(30,"div",16),m("dragover",function(d){return t.onDragOverFront(d)})("dragleave",function(d){return t.onDragLeaveFront(d)})("drop",function(d){return t.onDropFront(d)})("click",function(){return t.triggerFileInput("front")})("keydown",function(d){return t.onKeydown(d,"front")}),g(31,je,9,0,"div",17)(32,Ae,6,3,"div",18),a(),r(33,"input",19),m("change",function(d){return t.onFileSelected(d,"front")}),a()(),r(34,"div",13)(35,"h4",14),l(36," Dorso del DNI "),g(37,Re,2,0,"i",15),a(),r(38,"div",16),m("dragover",function(d){return t.onDragOverBack(d)})("dragleave",function(d){return t.onDragLeaveBack(d)})("drop",function(d){return t.onDropBack(d)})("click",function(){return t.triggerFileInput("back")})("keydown",function(d){return t.onKeydown(d,"back")}),g(39,$e,9,0,"div",17)(40,Ye,6,3,"div",18),a(),r(41,"input",20),m("change",function(d){return t.onFileSelected(d,"back")}),a()()(),r(42,"div",21)(43,"button",22),m("click",function(){return t.onSubmit()}),r(44,"span",23),g(45,qe,2,0,"i",24)(46,We,2,0,"i",10),l(47),a()(),g(48,Je,5,0,"div",25)(49,Ze,7,1,"div",26)(50,en,5,0,"div",27)(51,nn,4,0,"button",28),a()()()),n&2){let i,d,P,W,z;s(8),_(t.hasFiles()?8:-1),s(21),_((i=t.frontDni())!=null&&i.isValid?29:-1),s(),C("dni-uploader__dropzone--dragging",t.isDraggingFront())("dni-uploader__dropzone--error",t.frontDni()&&!t.frontDni().isValid)("dni-uploader__dropzone--success",(d=t.frontDni())==null?null:d.isValid)("dni-uploader__dropzone--disabled",t.isSubmitting()),U("aria-label",t.frontDni()?"Cambiar imagen del frente":"Subir imagen del frente"),s(),_(t.frontDni()?32:31),s(2),h("disabled",t.isSubmitting()),s(4),_((P=t.backDni())!=null&&P.isValid?37:-1),s(),C("dni-uploader__dropzone--dragging",t.isDraggingBack())("dni-uploader__dropzone--error",t.backDni()&&!t.backDni().isValid)("dni-uploader__dropzone--success",(W=t.backDni())==null?null:W.isValid)("dni-uploader__dropzone--disabled",t.isSubmitting()),U("aria-label",t.backDni()?"Cambiar imagen del dorso":"Subir imagen del dorso"),s(),_(t.backDni()?40:39),s(2),h("disabled",t.isSubmitting()),s(2),C("dni-uploader__submit-btn--disabled",!t.canSubmit())("dni-uploader__submit-btn--loading",t.isSubmitting()),h("disabled",!t.canSubmit()||t.isSubmitting()),U("aria-busy",t.isSubmitting()),s(2),_(t.isSubmitting()?45:46),s(2),v(" ",t.isSubmitting()?"Enviando...":"Enviar para verificaci\xF3n"," "),s(),_(t.canSubmit()&&!t.isSubmitting()?48:-1),s(),_(!t.canSubmit()&&t.hasFiles()&&!t.isSubmitting()?49:-1),s(),_(t.isSubmitting()?50:-1),s(),_(!t.canSubmit()&&t.hasFiles()&&((z=t.frontDni())!=null&&z.errorMessage||(z=t.backDni())!=null&&z.errorMessage)?51:-1)}},dependencies:[S],styles:['.icon[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;color:#fff}.btn--primary[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;color:#1f2937;border:1px solid #e5e7eb}.btn--outline[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn--danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{background-color:#ed2d2d}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background-color:transparent;color:#6b7280;border:none;cursor:pointer;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#f9fafb;color:#3b82f6}.btn-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:60px 20px;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;border-radius:50%;background-color:#3b82f61a;color:#3b82f6;margin-bottom:24px}.empty-state__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 8px;color:#1f2937}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 24px}.dni-uploader[_ngcontent-%COMP%]{max-width:900px;margin:0 auto}.dni-uploader__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid #e5e7eb}@media (max-width: 479px){.dni-uploader__header[_ngcontent-%COMP%]{margin-bottom:24px;padding-bottom:16px}}.dni-uploader__title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#1f2937;margin:0 0 12px}.dni-uploader__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:12px}@media (max-width: 479px){.dni-uploader__title[_ngcontent-%COMP%]{font-size:24px;margin-bottom:8px}}.dni-uploader__title-icon[_ngcontent-%COMP%]{font-size:32px;color:#f59e0b}@media (max-width: 479px){.dni-uploader__title-icon[_ngcontent-%COMP%]{font-size:28px}}.dni-uploader__description[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;line-height:1.5;max-width:600px;margin:0 auto}@media (max-width: 479px){.dni-uploader__description[_ngcontent-%COMP%]{font-size:14px}}.dni-uploader__progress[_ngcontent-%COMP%]{margin:16px auto 0;max-width:400px;padding:0}@media (max-width: 479px){.dni-uploader__progress[_ngcontent-%COMP%]{margin-top:12px;max-width:100%}}.dni-uploader__progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;background:#f3f4f6;border-radius:4px;overflow:hidden;box-shadow:inset 0 2px 4px #0000000d}@media (max-width: 479px){.dni-uploader__progress-bar[_ngcontent-%COMP%]{height:6px}}.dni-uploader__progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#10b981,#34d399);border-radius:4px;transition:width .4s cubic-bezier(.4,0,.2,1);box-shadow:0 2px 8px #10b9814d}@media (prefers-reduced-motion: reduce){.dni-uploader__progress-fill[_ngcontent-%COMP%]{transition-duration:0s}}.dni-uploader__progress-text[_ngcontent-%COMP%]{display:block;text-align:center;font-size:12px;font-weight:500;color:#6b7280;margin-top:6px}@media (max-width: 479px){.dni-uploader__progress-text[_ngcontent-%COMP%]{font-size:11px;margin-top:4px}}.dni-uploader__content[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:32px;box-shadow:0 4px 24px #00000014;border:1px solid #e5e7eb}@media (max-width: 479px){.dni-uploader__content[_ngcontent-%COMP%]{padding:20px;border-radius:12px}}.dni-uploader__container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:32px}@media (max-width: 479px){.dni-uploader__container[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:20px;margin-bottom:24px}}.dni-uploader__section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.dni-uploader__section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#374151;margin:0 0 16px}.dni-uploader__section-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}@media (max-width: 479px){.dni-uploader__section-title[_ngcontent-%COMP%]{font-size:16px;margin-bottom:12px}}.dni-uploader__section-check[_ngcontent-%COMP%]{font-size:20px;color:#10b981;line-height:1;animation:_ngcontent-%COMP%_checkmark-bounce .6s cubic-bezier(.68,-.55,.265,1.55)}@media (max-width: 479px){.dni-uploader__section-check[_ngcontent-%COMP%]{font-size:18px}}@media (prefers-reduced-motion: reduce){.dni-uploader__section-check[_ngcontent-%COMP%]{animation:none}}@keyframes _ngcontent-%COMP%_checkmark-bounce{0%{transform:scale(0) rotate(0);opacity:0}50%{transform:scale(1.3) rotate(180deg);opacity:.8}to{transform:scale(1) rotate(360deg);opacity:1}}.dni-uploader__dropzone[_ngcontent-%COMP%]{position:relative;min-height:220px;border:2px dashed #d1d5db;border-radius:12px;background:#f9fafb;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);overflow:hidden;display:flex;align-items:center;justify-content:center}@media (max-width: 479px){.dni-uploader__dropzone[_ngcontent-%COMP%]{min-height:180px;border-radius:8px}}.dni-uploader__dropzone[_ngcontent-%COMP%]:hover{border-color:#3b82f6;background:#f0f9ff;transform:translateY(-2px)}@media (prefers-reduced-motion: reduce){.dni-uploader__dropzone[_ngcontent-%COMP%]:hover{transform:none}}@media (hover: none) and (pointer: coarse){.dni-uploader__dropzone[_ngcontent-%COMP%]:hover{transform:none;background:#f9fafb}}.dni-uploader__dropzone--dragging[_ngcontent-%COMP%]{border-color:#3b82f6;background:#dbeafe;transform:scale(1.02);box-shadow:0 8px 25px #3b82f626}@media (prefers-reduced-motion: reduce){.dni-uploader__dropzone--dragging[_ngcontent-%COMP%]{transform:none}}.dni-uploader__dropzone--success[_ngcontent-%COMP%]{border-color:#10b981;background:#f0fdf4}.dni-uploader__dropzone--success[_ngcontent-%COMP%]:hover{background:#ecfdf5}.dni-uploader__dropzone--error[_ngcontent-%COMP%]{border-color:#ef4444;background:#fef2f2}.dni-uploader__dropzone--error[_ngcontent-%COMP%]:hover{background:#fef2f2}.dni-uploader__dropzone--disabled[_ngcontent-%COMP%]{opacity:.6;cursor:not-allowed;pointer-events:none}.dni-uploader__dropzone--disabled[_ngcontent-%COMP%]:hover{transform:none;background:#f9fafb}.dni-uploader__dropzone-content[_ngcontent-%COMP%]{text-align:center;padding:24px}@media (max-width: 479px){.dni-uploader__dropzone-content[_ngcontent-%COMP%]{padding:16px}}.dni-uploader__icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:16px;color:#6b7280;line-height:1}@media (max-width: 479px){.dni-uploader__icon[_ngcontent-%COMP%]{font-size:32px;margin-bottom:12px}}.dni-uploader__dropzone-text[_ngcontent-%COMP%]{font-size:16px;color:#6b7280;margin:0 0 8px}.dni-uploader__dropzone-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#3b82f6;font-weight:600}@media (max-width: 479px){.dni-uploader__dropzone-text[_ngcontent-%COMP%]{font-size:14px;margin-bottom:6px}}.dni-uploader__dropzone-subtext[_ngcontent-%COMP%]{font-size:14px;color:#9ca3af;margin:0}@media (max-width: 479px){.dni-uploader__dropzone-subtext[_ngcontent-%COMP%]{font-size:12px}}.dni-uploader__preview[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;min-height:220px;display:flex;align-items:center;justify-content:center}@media (max-width: 479px){.dni-uploader__preview[_ngcontent-%COMP%]{min-height:180px}}.dni-uploader__preview-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain;border-radius:8px;box-shadow:0 4px 12px #0000001a}.dni-uploader__file-info[_ngcontent-%COMP%]{position:absolute;bottom:8px;left:8px;right:48px;background:#000000bf;color:#fff;padding:6px 10px;border-radius:6px;font-size:12px;backdrop-filter:blur(4px);z-index:5}@media (max-width: 479px){.dni-uploader__file-info[_ngcontent-%COMP%]{font-size:11px;padding:4px 8px;right:40px}}.dni-uploader__file-name[_ngcontent-%COMP%]{display:block;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-bottom:2px}.dni-uploader__file-size[_ngcontent-%COMP%]{font-size:10px;opacity:.9;font-weight:400}@media (max-width: 479px){.dni-uploader__file-size[_ngcontent-%COMP%]{font-size:9px}}.dni-uploader__preview-error[_ngcontent-%COMP%]{text-align:center;padding:24px;gap:16px}.dni-uploader__preview-error[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 479px){.dni-uploader__preview-error[_ngcontent-%COMP%]{padding:16px;gap:12px}}.dni-uploader__error-icon[_ngcontent-%COMP%]{font-size:36px;color:#dc2626;line-height:1}@media (max-width: 479px){.dni-uploader__error-icon[_ngcontent-%COMP%]{font-size:32px}}.dni-uploader__error-text[_ngcontent-%COMP%]{font-size:14px;color:#dc2626;margin:0;font-weight:500;line-height:1.4}@media (max-width: 479px){.dni-uploader__error-text[_ngcontent-%COMP%]{font-size:13px}}.dni-uploader__retry-btn[_ngcontent-%COMP%]{background:#f59e0b;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s ease}.dni-uploader__retry-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:6px}.dni-uploader__retry-btn[_ngcontent-%COMP%]:hover{background:#d97706;transform:translateY(-1px)}@media (prefers-reduced-motion: reduce){.dni-uploader__retry-btn[_ngcontent-%COMP%]:hover{transform:none}}@media (max-width: 479px){.dni-uploader__retry-btn[_ngcontent-%COMP%]{padding:6px 12px;font-size:11px}}.dni-uploader__remove-btn[_ngcontent-%COMP%]{position:absolute;top:12px;right:12px;width:36px;height:36px;border:none;border-radius:50%;background:#ef4444e6;color:#fff;font-size:24px;cursor:pointer;transition:all .2s ease;z-index:10;backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center}.dni-uploader__remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){background:#dc2626;transform:scale(1.1)}@media (prefers-reduced-motion: reduce){.dni-uploader__remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:none}}.dni-uploader__remove-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}@media (max-width: 479px){.dni-uploader__remove-btn[_ngcontent-%COMP%]{width:32px;height:32px;font-size:20px;top:8px;right:8px}}.dni-uploader__file-input[_ngcontent-%COMP%]{display:none}.dni-uploader__actions[_ngcontent-%COMP%]{text-align:center;padding-top:24px;border-top:1px solid #f3f4f6;gap:12px}.dni-uploader__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 479px){.dni-uploader__actions[_ngcontent-%COMP%]{padding-top:20px;gap:10px}}.dni-uploader__submit-btn[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f59e0b,#d97706);color:#fff;border:none;border-radius:12px;padding:16px 32px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);min-width:240px;box-shadow:0 4px 14px #f59e0b40;position:relative;overflow:hidden}.dni-uploader__submit-btn-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:10px}.dni-uploader__submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 8px 24px #f59e0b59}@media (prefers-reduced-motion: reduce){.dni-uploader__submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:none}}.dni-uploader__submit-btn[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.dni-uploader__submit-btn--disabled[_ngcontent-%COMP%]{background:#d1d5db;color:#9ca3af;cursor:not-allowed;box-shadow:none}.dni-uploader__submit-btn--disabled[_ngcontent-%COMP%]:hover{background:#d1d5db;transform:none}.dni-uploader__submit-btn--loading[_ngcontent-%COMP%]{pointer-events:none}.dni-uploader__submit-btn--loading[_ngcontent-%COMP%]   .dni-uploader__submit-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (max-width: 479px){.dni-uploader__submit-btn[_ngcontent-%COMP%]{width:100%;min-width:auto;padding:14px 20px;font-size:16px}}.dni-uploader__submit-btn[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:24px}@media (max-width: 479px){.dni-uploader__submit-btn[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:20px}}.dni-uploader__submit-spinner[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_spin 1s linear infinite}@media (prefers-reduced-motion: reduce){.dni-uploader__submit-spinner[_ngcontent-%COMP%]{animation:spin 3s linear infinite}}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.dni-uploader__retry-all-btn[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border:none;padding:10px 20px;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s ease}.dni-uploader__retry-all-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.dni-uploader__retry-all-btn[_ngcontent-%COMP%]:hover{background:#2563eb;transform:translateY(-1px)}@media (prefers-reduced-motion: reduce){.dni-uploader__retry-all-btn[_ngcontent-%COMP%]:hover{transform:none}}@media (max-width: 479px){.dni-uploader__retry-all-btn[_ngcontent-%COMP%]{width:100%;padding:12px 16px}}.dni-uploader__status[_ngcontent-%COMP%]{font-size:14px;font-weight:500;padding:12px 16px;border-radius:8px}.dni-uploader__status[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}.dni-uploader__status--success[_ngcontent-%COMP%]{background:#ecfdf5;color:#065f46;border:1px solid #a7f3d0}.dni-uploader__status--warning[_ngcontent-%COMP%]{background:#fffbeb;color:#92400e;border:1px solid #fcd34d}.dni-uploader__status--info[_ngcontent-%COMP%]{background:#eff6ff;color:#1e40af;border:1px solid #93c5fd}@media (max-width: 479px){.dni-uploader__status[_ngcontent-%COMP%]{font-size:13px;padding:10px 14px}}.dni-uploader__status[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:20px}@media (max-width: 479px){.dni-uploader__status[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:18px}}.dni-uploader__info[_ngcontent-%COMP%]{margin-bottom:24px}@media (max-width: 479px){.dni-uploader__info[_ngcontent-%COMP%]{margin-bottom:24px}}.dni-uploader__tips[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f8fafc,#f1f5f9);border:1px solid #e2e8f0;border-left:4px solid #3b82f6;border-radius:12px;padding:20px;position:relative;overflow:hidden}.dni-uploader__tips[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;right:0;width:100px;height:100px;background:radial-gradient(circle,rgba(59,130,246,.1) 0%,transparent 70%);pointer-events:none}@media (max-width: 479px){.dni-uploader__tips[_ngcontent-%COMP%]{padding:16px;border-radius:8px}}.dni-uploader__tips-title[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#1e40af;margin:0 0 12px}.dni-uploader__tips-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:10px}@media (max-width: 479px){.dni-uploader__tips-title[_ngcontent-%COMP%]{font-size:15px;margin-bottom:10px}}.dni-uploader__tips-title[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:20px;color:#3b82f6}@media (max-width: 479px){.dni-uploader__tips-title[_ngcontent-%COMP%]   i.material-icons[_ngcontent-%COMP%]{font-size:18px}}.dni-uploader__tips-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;gap:8px}.dni-uploader__tips-list[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media (max-width: 479px){.dni-uploader__tips-list[_ngcontent-%COMP%]{gap:6px}}.dni-uploader__tips-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:14px;color:#475569;line-height:1.5;padding-left:20px;position:relative;transition:color .2s ease}.dni-uploader__tips-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:.6em;width:6px;height:6px;background:#3b82f6;border-radius:50%;transform:translateY(-50%)}.dni-uploader__tips-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#334155}@media (max-width: 479px){.dni-uploader__tips-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{font-size:13px;padding-left:16px}}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.dni-uploader__submit-btn[_ngcontent-%COMP%]:disabled{animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}@media (prefers-reduced-motion: reduce){.dni-uploader__submit-btn[_ngcontent-%COMP%]:disabled{animation:none}}@media (prefers-reduced-motion: reduce){.dni-uploader[_ngcontent-%COMP%]   .dni-uploader__dropzone[_ngcontent-%COMP%], .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__submit-btn[_ngcontent-%COMP%], .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__remove-btn[_ngcontent-%COMP%], .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__retry-btn[_ngcontent-%COMP%], .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__retry-all-btn[_ngcontent-%COMP%]{transition:none!important}.dni-uploader[_ngcontent-%COMP%]   .dni-uploader__dropzone[_ngcontent-%COMP%]:hover, .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__submit-btn[_ngcontent-%COMP%]:hover, .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__remove-btn[_ngcontent-%COMP%]:hover, .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__retry-btn[_ngcontent-%COMP%]:hover, .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__retry-all-btn[_ngcontent-%COMP%]:hover, .dni-uploader[_ngcontent-%COMP%]   .dni-uploader__dropzone--dragging[_ngcontent-%COMP%]{transform:none!important}}.dni-uploader[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:2px;border-radius:4px}@media (hover: none) and (pointer: coarse){.dni-uploader__dropzone[_ngcontent-%COMP%]:hover{transform:none;background:#f9fafb}.dni-uploader__submit-btn[_ngcontent-%COMP%]:hover:not(:disabled){transform:none}}'],changeDetection:0})};function tn(o,e){o&1&&p(0,"app-loading-spinner",10),o&2&&h("message","Cargando datos del perfil...")}function on(o,e){if(o&1){let n=b();r(0,"div",9)(1,"app-profile-form",11),m("formSubmit",function(i){u(n);let d=c(2);return f(d.onProfileSubmit(i))})("formCancel",function(){u(n);let i=c(2);return f(i.onFormCancel())}),a()()}if(o&2){let n=c(2);s(),h("initialData",n.initialData)("isSubmitting",n.isSubmitting)}}function rn(o,e){if(o&1&&g(0,tn,1,1,"app-loading-spinner",10)(1,on,2,2,"div",9),o&2){let n=c();_(n.loading||!n.initialData?0:1)}}function an(o,e){o&1&&p(0,"app-loading-spinner",10),o&2&&h("message","Cargando obras sociales...")}function ln(o,e){if(o&1){let n=b();r(0,"div",9)(1,"app-health-insurance-manager",12),m("insurancesChanged",function(i){u(n);let d=c(2);return f(d.onInsurancesChanged(i))})("saveInsurances",function(i){u(n);let d=c(2);return f(d.onSaveInsurances(i))}),a()()}if(o&2){let n=c(2);s(),h("availableInsurances",n.availableHealthInsurances)("selectedInsurances",n.selectedHealthInsurances)}}function dn(o,e){if(o&1&&g(0,an,1,1,"app-loading-spinner",10)(1,ln,2,2,"div",9),o&2){let n=c();_(n.loading||n.availableHealthInsurances.length===0?0:1)}}function sn(o,e){if(o&1){let n=b();r(0,"div",9)(1,"app-dni-uploader",13),m("uploadSuccess",function(i){u(n);let d=c();return f(d.onDniUploadSuccess(i))})("uploadError",function(i){u(n);let d=c();return f(d.onDniUploadError(i))}),a()()}}var be=class o{authService=x(se);userService=x(N);healthInsuranceService=x(xe);notificationService=x(H);logger=x(k);router=x(le);destroy$=new F;loading=!0;user=null;healthInsurances=[];isSubmitting=!1;activeTab="profile";initialData=null;availableHealthInsurances=[];selectedHealthInsurances=[];ngOnInit(){if(!this.authService.isLoggedIn()){this.logger.info("Usuario no autenticado, redirigiendo a /login"),this.router.navigate(["/login"]);return}X({user:this.authService.getUser(),insurances:this.healthInsuranceService.getAll()}).pipe(w(this.destroy$)).subscribe({next:({user:e,insurances:n})=>{if(!e){this.notificationService.error("Ocurri\xF3 un error inesperado. Por favor, inicia sesi\xF3n nuevamente.",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.logger.error("No se encontraron datos del usuario"),this.router.navigate(["/login"]);return}this.user=e,this.initialData={username:e.username,first_name:e.first_name,last_name:e.last_name,address:e.address||"",telephone:e.telephone||"",img_profile:e.img_profile||null,health_insurance:e.health_insurance||[],is_active:e.is_active,is_admin:e.is_admin,is_superuser:e.is_superuser},this.healthInsurances=n,this.availableHealthInsurances=[...n],this.selectedHealthInsurances=[],this.user?.health_insurance&&this.user.health_insurance.forEach(t=>{let i=this.availableHealthInsurances.find(d=>d.id===t);i&&(this.selectedHealthInsurances.push(i),this.availableHealthInsurances=this.availableHealthInsurances.filter(d=>d.id!==t))}),this.loading=!1},error:e=>{this.loading=!1,this.notificationService.error("Ocurri\xF3 un error al cargar los datos.",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.handleError(e,"Error al cargar datos iniciales"),this.router.navigate(["/login"])}})}loadUserData(){this.authService.getUser().pipe(w(this.destroy$)).subscribe({next:e=>{if(!e){this.notificationService.error("Ocurri\xF3 un error inesperado. Por favor, inicia sesi\xF3n nuevamente.",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.logger.error("No se encontraron datos del usuario"),this.router.navigate(["/login"]);return}this.user=e,this.initialData={username:e.username,first_name:e.first_name,last_name:e.last_name,address:e.address||"",telephone:e.telephone||"",img_profile:e.img_profile||null,health_insurance:e.health_insurance||[],is_active:e.is_active,is_admin:e.is_admin,is_superuser:e.is_superuser}},error:e=>{this.notificationService.error("Ocurri\xF3 un error al cargar los datos del usuario.",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.router.navigate(["/login"])}})}loadHealthInsurances(){this.healthInsuranceService.getAll().pipe(w(this.destroy$)).subscribe({next:e=>{this.healthInsurances=e,this.availableHealthInsurances=[...e],this.selectedHealthInsurances=[],this.user?.health_insurance&&this.user.health_insurance.forEach(n=>{let t=this.availableHealthInsurances.find(i=>i.id===n);t&&(this.selectedHealthInsurances.push(t),this.availableHealthInsurances=this.availableHealthInsurances.filter(i=>i.id!==n))})},error:e=>{this.handleError(e,"Error al cargar las obras sociales")}})}setActiveTab(e){this.activeTab=e}onProfileSubmit(e){if(!this.user){this.logger.error("No se encontraron datos del usuario");return}let n=this.user.id,t={username:this.user.username,first_name:this.user.first_name||void 0,last_name:this.user.last_name||void 0,address:e.address||void 0,telephone:e.telephone||void 0,health_insurance:this.selectedHealthInsurances.map(i=>i.id),img_profile:e.img_profile};this.isSubmitting=!0,this.userService.updateUser(n,t).pipe(w(this.destroy$)).subscribe({next:i=>{this.isSubmitting=!1,this.notificationService.success("\xA1Datos actualizados con \xE9xito!",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),setTimeout(()=>{this.router.navigate(["/user_panel/profile"])},2e3)},error:i=>{this.isSubmitting=!1,this.notificationService.error("\xA1Ocurri\xF3 un error al actualizar el perfil!",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.handleError(i,"Error al actualizar el perfil")}})}onInsurancesChanged(e){this.availableHealthInsurances=e.available,this.selectedHealthInsurances=e.selected}onSaveInsurances(e){if(!this.user)return;let n={username:this.user.username,first_name:this.user.first_name||void 0,last_name:this.user.last_name||void 0,address:this.user.address||void 0,telephone:this.user.telephone||void 0,health_insurance:e};this.isSubmitting=!0,this.userService.updateUser(this.user.id,n).pipe(w(this.destroy$)).subscribe({next:t=>{this.isSubmitting=!1,this.notificationService.success("\xA1Obras sociales actualizadas con \xE9xito!",{duration:3e3})},error:t=>{this.isSubmitting=!1,this.notificationService.error("Error al actualizar las obras sociales",{duration:5e3}),this.handleError(t,"Error al actualizar las obras sociales")}})}onFormCancel(){this.router.navigate(["/user_panel/profile"])}onDniUploadSuccess(e){this.logger.info("DNI enviado exitosamente:",e),this.notificationService.success("DNI enviado correctamente para verificaci\xF3n",{duration:5e3,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}})}onDniUploadError(e){this.logger.error("Error al enviar DNI:",e),this.notificationService.error(e,{duration:7e3})}handleError(e,n){this.logger.error(n,e);let t=n;if(e.status===422&&e.error?.detail){let i=e.error.detail;Array.isArray(i)?t=i.map(d=>`${d.loc.join(".")} (${d.type}): ${d.msg}`).join("; "):t=i||n}else e.status===403?t="No tienes permisos para realizar esta acci\xF3n.":t=e.error?.detail||e.error?.message||e.message||n}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(n){return new(n||o)};static \u0275cmp=y({type:o,selectors:[["app-edit-profile"]],decls:19,vars:9,consts:[[1,"edit-profile"],[1,"edit-profile__navigation"],[1,"profile-tabs"],["type","button",1,"profile-tabs__item",3,"click"],[1,"fas","fa-user","profile-tabs__icon"],[1,"profile-tabs__label"],[1,"fas","fa-hospital","profile-tabs__icon"],[1,"fas","fa-id-card","profile-tabs__icon"],[1,"edit-profile__content"],[1,"edit-profile__tab"],[3,"message"],[3,"formSubmit","formCancel","initialData","isSubmitting"],[3,"insurancesChanged","saveInsurances","availableInsurances","selectedInsurances"],[3,"uploadSuccess","uploadError"]],template:function(n,t){n&1&&(r(0,"div",0)(1,"div",1)(2,"nav",2)(3,"button",3),m("click",function(){return t.setActiveTab("profile")}),p(4,"i",4),r(5,"span",5),l(6,"Datos Personales"),a()(),r(7,"button",3),m("click",function(){return t.setActiveTab("insurance")}),p(8,"i",6),r(9,"span",5),l(10,"Obras Sociales"),a()(),r(11,"button",3),m("click",function(){return t.setActiveTab("dni")}),p(12,"i",7),r(13,"span",5),l(14,"Verificar DNI"),a()()()(),r(15,"div",8),g(16,rn,2,1)(17,dn,2,1)(18,sn,2,0,"div",9),a()()),n&2&&(s(3),C("profile-tabs__item--active",t.activeTab==="profile"),s(4),C("profile-tabs__item--active",t.activeTab==="insurance"),s(4),C("profile-tabs__item--active",t.activeTab==="dni"),s(5),_(t.activeTab==="profile"?16:-1),s(),_(t.activeTab==="insurance"?17:-1),s(),_(t.activeTab==="dni"?18:-1))},dependencies:[S,de,L,A,R,j],styles:['.icon[_ngcontent-%COMP%]{width:20px;height:20px;stroke-width:2}.btn[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:all .2s ease;border:none;color:#fff}.btn--primary[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(135deg,#3b82f6,#1d4ed8)}.btn--outline[_ngcontent-%COMP%]{background-color:transparent;color:#1f2937;border:1px solid #e5e7eb}.btn--outline[_ngcontent-%COMP%]:hover{background-color:#f9fafb}.btn--danger[_ngcontent-%COMP%]{background-color:#ef4444;color:#fff}.btn--danger[_ngcontent-%COMP%]:hover{background-color:#ed2d2d}.btn--sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:16px;height:16px}.btn-icon[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;background-color:transparent;color:#6b7280;border:none;cursor:pointer;transition:all .2s ease}.btn-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:8px}.btn-icon[_ngcontent-%COMP%]:hover{background-color:#f9fafb;color:#3b82f6}.btn-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:18px;height:18px}.empty-state[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:60px 20px;text-align:center}.empty-state__icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:80px;height:80px;border-radius:50%;background-color:#3b82f61a;color:#3b82f6;margin-bottom:24px}.empty-state__icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:40px;height:40px}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin:0 0 8px;color:#1f2937}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0 0 24px}.edit-profile[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:24px}@media (max-width: 479px){.edit-profile[_ngcontent-%COMP%]{padding:16px}}.edit-profile__navigation[_ngcontent-%COMP%]{margin-bottom:32px}@media (max-width: 479px){.edit-profile__navigation[_ngcontent-%COMP%]{margin-bottom:24px}}.edit-profile__content[_ngcontent-%COMP%]{min-height:600px}@media (max-width: 479px){.edit-profile__content[_ngcontent-%COMP%]{min-height:500px}}.edit-profile__tab[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInUp .4s ease-out}@media (prefers-reduced-motion: reduce){.edit-profile__tab[_ngcontent-%COMP%]{animation:none}}.profile-tabs[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:8px;box-shadow:0 4px 16px #00000014;border:1px solid #e5e7eb}.profile-tabs[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:0}@media (max-width: 479px){.profile-tabs[_ngcontent-%COMP%]{border-radius:12px;padding:6px;flex-direction:column;gap:4px}}.profile-tabs__item[_ngcontent-%COMP%]{flex:1;padding:16px 24px;border:none;background:transparent;border-radius:12px;font-weight:500;font-size:14px;color:#6b7280;cursor:pointer;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.profile-tabs__item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:8px}@media (max-width: 479px){.profile-tabs__item[_ngcontent-%COMP%]{padding:12px 16px;font-size:13px;justify-content:flex-start}}.profile-tabs__item[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,#3b82f6,#1d4ed8);opacity:0;z-index:1;transition:opacity .3s ease}.profile-tabs__item[_ngcontent-%COMP%]:hover{color:#374151;transform:translateY(-2px)}@media (prefers-reduced-motion: reduce){.profile-tabs__item[_ngcontent-%COMP%]:hover{transform:none}}@media (hover: none) and (pointer: coarse){.profile-tabs__item[_ngcontent-%COMP%]:hover{transform:none;color:#6b7280}}.profile-tabs__item[_ngcontent-%COMP%]:hover:before{opacity:.05}.profile-tabs__item[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #3b82f633}.profile-tabs__item--active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#3b82f6,#1d4ed8);color:#fff;transform:translateY(-2px);box-shadow:0 8px 24px #3b82f640}@media (prefers-reduced-motion: reduce){.profile-tabs__item--active[_ngcontent-%COMP%]{transform:none}}.profile-tabs__item--active[_ngcontent-%COMP%]:before{opacity:0}.profile-tabs__item--active[_ngcontent-%COMP%]:hover{transform:translateY(-2px);color:#fff}@media (prefers-reduced-motion: reduce){.profile-tabs__item--active[_ngcontent-%COMP%]:hover{transform:none}}.profile-tabs__item--active[_ngcontent-%COMP%]   .profile-tabs__icon[_ngcontent-%COMP%]{transform:scale(1.1)}@media (prefers-reduced-motion: reduce){.profile-tabs__item--active[_ngcontent-%COMP%]   .profile-tabs__icon[_ngcontent-%COMP%]{transform:none}}.profile-tabs__icon[_ngcontent-%COMP%]{font-size:18px;transition:transform .3s ease;position:relative;z-index:2}@media (max-width: 479px){.profile-tabs__icon[_ngcontent-%COMP%]{font-size:16px}}.profile-tabs__label[_ngcontent-%COMP%]{font-weight:inherit;position:relative;z-index:2;white-space:nowrap}@media (max-width: 479px){.profile-tabs__label[_ngcontent-%COMP%]{font-size:inherit}}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(24px)}to{opacity:1;transform:translateY(0)}}@media (prefers-reduced-motion: reduce){.profile-tabs__item[_ngcontent-%COMP%]{transition:none!important}.profile-tabs__item[_ngcontent-%COMP%]:hover, .profile-tabs__item--active[_ngcontent-%COMP%]{transform:none!important}.profile-tabs__icon[_ngcontent-%COMP%]{transition:none!important}.profile-tabs__item--active[_ngcontent-%COMP%]   .profile-tabs__icon[_ngcontent-%COMP%]{transform:none!important}}.profile-tabs__item[_ngcontent-%COMP%]:focus-visible{outline:3px solid #3b82f6;outline-offset:2px;border-radius:8px}']})};export{be as EditProfileComponent};
