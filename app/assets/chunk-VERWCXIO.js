import{$a as r,$b as P,Kb as a,Lb as o,Mb as f,Nb as w,Ob as k,Pb as O,Rb as m,Rc as F,Sb as u,Sc as I,Tc as H,Xa as b,Zc as S,ac as s,bc as C,cc as x,ia as v,ja as d,ka as p,kc as g,lb as M,qb as _,rc as E,zb as l}from"./chunk-U346BHW4.js";import"./chunk-4CLCTAJ7.js";var y=i=>({"filter-btn--active":i});function D(i,t){i&1&&(w(0),a(1,"div",10),f(2,"div",11),a(3,"p"),s(4,"Cargando historial m\xE9dico..."),o()(),k())}function V(i,t){i&1&&(a(0,"div",14)(1,"p"),s(2,"No hay entradas en el historial m\xE9dico con los filtros seleccionados."),o()())}function j(i,t){if(i&1&&(a(0,"li",30)(1,"a",31),f(2,"span",32),s(3),o()()),i&2){let e=t.$implicit;r(),l("href",e.url,b),r(),l("ngClass",e.type==="pdf"?"icon-file-pdf":"icon-file-image"),r(),x(" ",e.name," ")}}function L(i,t){if(i&1&&(a(0,"div",26)(1,"h5",27),s(2,"Archivos adjuntos"),o(),a(3,"ul",28),_(4,j,4,3,"li",29),o()()),i&2){let e=u().$implicit;r(4),l("ngForOf",e.attachments)}}function B(i,t){if(i&1&&(a(0,"div",17),f(1,"div",18),a(2,"div",19)(3,"div",20)(4,"h4",21),s(5),o(),a(6,"span",22),s(7),o()(),a(8,"div",23)(9,"span"),s(10),o(),a(11,"span"),s(12),o()(),a(13,"p",24),s(14),o(),_(15,L,5,1,"div",25),o()()),i&2){let e=t.$implicit,n=u(3);r(),l("ngClass",n.getTypeIcon(e.type)),r(4),C(e.title),r(),l("ngClass","history-entry__type--"+e.type),r(),x(" ",n.getTypeLabel(e.type)," "),r(3),C(n.formatDate(e.date)),r(2),C(e.doctor),r(2),C(e.description),r(),l("ngIf",e.attachments&&e.attachments.length>0)}}function N(i,t){if(i&1&&(a(0,"div",15),_(1,B,16,8,"div",16),o()),i&2){let e=u(2);r(),l("ngForOf",e.filteredEntries)}}function A(i,t){if(i&1&&_(0,V,3,0,"div",12)(1,N,2,1,"div",13),i&2){let e=u();l("ngIf",e.filteredEntries.length===0),r(),l("ngIf",e.filteredEntries.length>0)}}var T=class i{patientId=null;historyEntries=[];filteredEntries=[];isLoading=!1;typeFilter="all";searchTerm="";constructor(){}ngOnChanges(t){t.patientId&&t.patientId.currentValue&&this.loadMedicalHistory()}loadMedicalHistory(){this.patientId&&(this.isLoading=!0,setTimeout(()=>{this.historyEntries=[{id:"entry-1",date:new Date(2023,4,15),type:"consultation",title:"Consulta inicial",description:"Paciente acude por dolor en el pecho. Se realiza ECG que muestra ritmo sinusal normal.",doctor:"Dr. Ana Mart\xEDnez"},{id:"entry-2",date:new Date(2023,4,20),type:"lab",title:"An\xE1lisis de sangre",description:"Hemograma completo y perfil lip\xEDdico. Colesterol elevado (240 mg/dL).",doctor:"Dr. Juan P\xE9rez",attachments:[{name:"Resultados laboratorio.pdf",url:"/assets/documents/lab-results.pdf",type:"pdf"}]},{id:"entry-3",date:new Date(2023,5,5),type:"diagnosis",title:"Diagn\xF3stico: Hipertensi\xF3n",description:"Se diagnostica hipertensi\xF3n arterial grado 1. Se recomienda cambios en el estilo de vida y seguimiento.",doctor:"Dr. Ana Mart\xEDnez"},{id:"entry-4",date:new Date(2023,5,5),type:"medication",title:"Prescripci\xF3n: Enalapril",description:"Enalapril 10mg, 1 comprimido cada 24 horas por 30 d\xEDas.",doctor:"Dr. Ana Mart\xEDnez"},{id:"entry-5",date:new Date(2023,6,10),type:"consultation",title:"Seguimiento",description:"Paciente refiere mejor\xEDa. Presi\xF3n arterial controlada (130/85 mmHg).",doctor:"Dr. Ana Mart\xEDnez"},{id:"entry-6",date:new Date(2023,7,15),type:"imaging",title:"Ecocardiograma",description:"Funci\xF3n ventricular conservada. No se observan alteraciones estructurales significativas.",doctor:"Dr. Carlos Rodr\xEDguez",attachments:[{name:"Ecocardiograma.jpg",url:"/assets/images/echo.jpg",type:"image"},{name:"Informe ecocardiograma.pdf",url:"/assets/documents/echo-report.pdf",type:"pdf"}]}],this.applyFilters(),this.isLoading=!1},1200))}applyFilters(){this.filteredEntries=this.historyEntries.filter(t=>{if(this.typeFilter!=="all"&&t.type!==this.typeFilter)return!1;if(this.searchTerm.trim()!==""){let e=this.searchTerm.toLowerCase();return t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.doctor.toLowerCase().includes(e)}return!0}),this.filteredEntries.sort((t,e)=>e.date.getTime()-t.date.getTime())}getTypeLabel(t){return{consultation:"Consulta",procedure:"Procedimiento",diagnosis:"Diagn\xF3stico",medication:"Medicaci\xF3n",lab:"Laboratorio",imaging:"Im\xE1genes"}[t]||t}getTypeIcon(t){return{consultation:"icon-user-check",procedure:"icon-activity",diagnosis:"icon-clipboard",medication:"icon-pill",lab:"icon-flask",imaging:"icon-image"}[t]||"icon-file-text"}formatDate(t){return t.toLocaleDateString("es-ES",{day:"numeric",month:"long",year:"numeric"})}onSearch(t){let e=t.target;this.searchTerm=e.value,this.applyFilters()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["app-medical-history"]],inputs:{patientId:"patientId"},features:[v],decls:23,vars:20,consts:[["historyContent",""],[1,"medical-history"],[1,"medical-history__header"],[1,"medical-history__title"],[1,"medical-history__search"],["type","text","placeholder","Buscar en historial...",1,"medical-history__search-input",3,"input"],[1,"medical-history__search-icon","icon-search"],[1,"medical-history__filters"],[1,"filter-btn",3,"click","ngClass"],[4,"ngIf","ngIfElse"],[1,"medical-history__loading"],[1,"loading-spinner"],["class","medical-history__empty",4,"ngIf"],["class","history-timeline",4,"ngIf"],[1,"medical-history__empty"],[1,"history-timeline"],["class","history-entry",4,"ngFor","ngForOf"],[1,"history-entry"],[1,"history-entry__icon",3,"ngClass"],[1,"history-entry__content"],[1,"history-entry__header"],[1,"history-entry__title"],[1,"history-entry__type",3,"ngClass"],[1,"history-entry__meta"],[1,"history-entry__description"],["class","history-entry__attachments",4,"ngIf"],[1,"history-entry__attachments"],[1,"history-entry__attachments-title"],[1,"attachment-list"],["class","attachment-item",4,"ngFor","ngForOf"],[1,"attachment-item"],["target","_blank",1,"attachment-link",3,"href"],[1,"attachment-icon",3,"ngClass"]],template:function(e,n){if(e&1){let c=O();a(0,"div",1)(1,"div",2)(2,"h3",3),s(3,"Historial M\xE9dico"),o(),a(4,"div",4)(5,"input",5),m("input",function(z){return d(c),p(n.onSearch(z))}),o(),f(6,"span",6),o()(),a(7,"div",7)(8,"button",8),m("click",function(){return d(c),n.typeFilter="all",p(n.applyFilters())}),s(9," Todos "),o(),a(10,"button",8),m("click",function(){return d(c),n.typeFilter="consultation",p(n.applyFilters())}),s(11," Consultas "),o(),a(12,"button",8),m("click",function(){return d(c),n.typeFilter="diagnosis",p(n.applyFilters())}),s(13," Diagn\xF3sticos "),o(),a(14,"button",8),m("click",function(){return d(c),n.typeFilter="medication",p(n.applyFilters())}),s(15," Medicaciones "),o(),a(16,"button",8),m("click",function(){return d(c),n.typeFilter="lab",p(n.applyFilters())}),s(17," Laboratorio "),o(),a(18,"button",8),m("click",function(){return d(c),n.typeFilter="imaging",p(n.applyFilters())}),s(19," Im\xE1genes "),o()(),_(20,D,5,0,"ng-container",9)(21,A,2,2,"ng-template",null,0,E),o()}if(e&2){let c=P(22);r(8),l("ngClass",g(8,y,n.typeFilter==="all")),r(2),l("ngClass",g(10,y,n.typeFilter==="consultation")),r(2),l("ngClass",g(12,y,n.typeFilter==="diagnosis")),r(2),l("ngClass",g(14,y,n.typeFilter==="medication")),r(2),l("ngClass",g(16,y,n.typeFilter==="lab")),r(2),l("ngClass",g(18,y,n.typeFilter==="imaging")),r(2),l("ngIf",n.isLoading)("ngIfElse",c)}},dependencies:[S,F,I,H],styles:[`@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_slideInUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}to{transform:scale(1)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.medical-history[_ngcontent-%COMP%]{background-color:#fff;border-radius:.5rem;padding:1.5rem;margin-bottom:1.5rem;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;transition:all .25s ease}.medical-history[_ngcontent-%COMP%]:hover{box-shadow:0 10px 15px -3px #0000001a,0 4px 6px -2px #0000000d}@media (max-width: 768px){.medical-history[_ngcontent-%COMP%]{padding:1rem}}.medical-history__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}@media (max-width: 768px){.medical-history__header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}}.medical-history__title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:600;margin:0;color:#2b2d42;position:relative;padding-bottom:.5rem}.medical-history__title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:0;left:0;width:40px;height:3px;background-color:#007bff;border-radius:9999px}.medical-history__search[_ngcontent-%COMP%]{position:relative;width:280px}@media (max-width: 768px){.medical-history__search[_ngcontent-%COMP%]{width:100%}}.medical-history__search-input[_ngcontent-%COMP%]{width:100%;padding:.5rem 1rem .5rem 2.5rem;border-radius:9999px;border:1px solid #e2e8f0;background-color:#f8fafc;font-size:.875rem;transition:all .15s ease}.medical-history__search-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px #007bff33}.medical-history__search-icon[_ngcontent-%COMP%]{position:absolute;left:.75rem;top:50%;transform:translateY(-50%);color:#64748b;pointer-events:none}.medical-history__filters[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1.5rem}.medical-history__loading[_ngcontent-%COMP%], .medical-history__empty[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex-direction:column;padding:2rem;text-align:center;color:#64748b}.medical-history__loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .medical-history__empty[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:.875rem}.filter-btn[_ngcontent-%COMP%]{padding:.5rem .75rem;border-radius:9999px;font-size:.75rem;font-weight:500;background-color:#f8fafc;color:#64748b;border:1px solid #e2e8f0;cursor:pointer;transition:all .15s ease}.filter-btn[_ngcontent-%COMP%]:hover{background-color:#edf2f7}.filter-btn--active[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;border-color:#007bff}.filter-btn--active[_ngcontent-%COMP%]:hover{background-color:#006fe6}.history-timeline[_ngcontent-%COMP%]{position:relative;padding-left:2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease}.history-timeline[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;left:.75rem;width:2px;background-color:#e2e8f0}.history-entry[_ngcontent-%COMP%]{position:relative;margin-bottom:1.5rem;animation:_ngcontent-%COMP%_slideInUp .5s ease}.history-entry[_ngcontent-%COMP%]:last-child{margin-bottom:0}.history-entry__icon[_ngcontent-%COMP%]{position:absolute;top:0;left:-2rem;width:1.75rem;height:1.75rem;border-radius:50%;background-color:#007bff;color:#fff;display:flex;align-items:center;justify-content:center;z-index:1;box-shadow:0 1px 2px #0000000d;transition:transform .25s ease}.history-entry__icon[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.history-entry__content[_ngcontent-%COMP%]{background-color:#f8fafc;border-radius:.5rem;padding:1rem;border-left:3px solid transparent;box-shadow:0 1px 2px #0000000d;transition:all .25s ease}.history-entry__content[_ngcontent-%COMP%]:hover{box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;transform:translateY(-2px)}@media (max-width: 768px){.history-entry__content[_ngcontent-%COMP%]{padding:.75rem}}.history-entry__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:.5rem}@media (max-width: 576px){.history-entry__header[_ngcontent-%COMP%]{flex-direction:column;gap:.5rem}}.history-entry__title[_ngcontent-%COMP%]{margin:0;font-size:1rem;font-weight:600;color:#2b2d42}.history-entry__type[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .5rem;border-radius:9999px;font-size:.75rem;font-weight:600}.history-entry__type--consultation[_ngcontent-%COMP%]{background-color:#007bff26;color:#007bff}.history-entry__type--procedure[_ngcontent-%COMP%]{background-color:#ffbe0b26;color:#ffbe0b}.history-entry__type--diagnosis[_ngcontent-%COMP%]{background-color:#00b4d826;color:#00b4d8}.history-entry__type--medication[_ngcontent-%COMP%]{background-color:#38b00026;color:#38b000}.history-entry__type--lab[_ngcontent-%COMP%]{background-color:#4361ee26;color:#4361ee}.history-entry__type--imaging[_ngcontent-%COMP%]{background-color:#ff5a5f26;color:#ff5a5f}.history-entry__meta[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:.75rem;font-size:.75rem;color:#64748b}@media (max-width: 576px){.history-entry__meta[_ngcontent-%COMP%]{flex-direction:column;gap:.25rem}}.history-entry__description[_ngcontent-%COMP%]{margin:0 0 .75rem;font-size:.875rem;color:#2b2d42;line-height:1.6}.history-entry__attachments[_ngcontent-%COMP%]{margin-top:1rem;padding-top:.75rem;border-top:1px solid #e2e8f0}.history-entry__attachments-title[_ngcontent-%COMP%]{font-size:.75rem;font-weight:600;margin:0 0 .5rem;color:#64748b;text-transform:uppercase;letter-spacing:.5px}.attachment-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;display:flex;flex-direction:column;gap:.5rem}.attachment-item[_ngcontent-%COMP%]{font-size:.875rem}.attachment-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#007bff;text-decoration:none;transition:all .15s ease}.attachment-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#0062cc}.attachment-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.icon-search[_ngcontent-%COMP%], .icon-user-check[_ngcontent-%COMP%], .icon-activity[_ngcontent-%COMP%], .icon-clipboard[_ngcontent-%COMP%], .icon-pill[_ngcontent-%COMP%], .icon-flask[_ngcontent-%COMP%], .icon-image[_ngcontent-%COMP%], .icon-file-text[_ngcontent-%COMP%], .icon-file-pdf[_ngcontent-%COMP%], .icon-file-image[_ngcontent-%COMP%]{display:inline-block;width:1.25rem;height:1.25rem;background-size:contain;background-repeat:no-repeat;background-position:center}.icon-search[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>')}.icon-user-check[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="8.5" cy="7" r="4"></circle><polyline points="17 11 19 13 23 9"></polyline></svg>')}.icon-activity[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>')}.icon-clipboard[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>')}.icon-pill[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.5 20H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v7.5"></path><path d="M17.5 22v-8.34"></path><path d="M15 22v-4"></path><path d="M20 22v-4"></path><path d="M22 19h-8"></path></svg>')}.icon-flask[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 3h6v2H9zM9 5v1.5a1.5 1.5 0 0 0 1.5 1.5h3a1.5 1.5 0 0 0 1.5-1.5V5"></path><path d="M8 10v11a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V10"></path><path d="M7 10h10"></path><path d="M7 14h10"></path></svg>')}.icon-image[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>')}.icon-file-text[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>')}.icon-file-pdf[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><path d="M9 15h6"></path><path d="M9 18h6"></path><path d="M9 12h2"></path></svg>')}.icon-file-image[_ngcontent-%COMP%]{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><circle cx="10" cy="13" r="2"></circle><path d="M20 17l-3.5-3.5-2 2-4-4L6 16"></path></svg>')}.loading-spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:4px solid rgba(0,123,255,.3);border-top-color:#007bff;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}`]})};export{T as MedicalHistoryComponent};
