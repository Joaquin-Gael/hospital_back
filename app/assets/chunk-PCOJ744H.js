import{a as m}from"./chunk-4W6XZAEZ.js";import{a as p,d as L}from"./chunk-3F3ZFDNX.js";import{C as i,W as d,aa as c,m as s,q as l}from"./chunk-U346BHW4.js";var n={GET_ALL:"medic/locations",ADD:"medic/locations/add",DELETE:o=>`medic/locations/delete/${o}`,UPDATE:o=>`medic/locations/update/${o}`};var u=class o{apiService=c(L);logger=c(p);storage=c(m);getLocations(){return this.apiService.get(n.GET_ALL).pipe(l(e=>(console.log("Respuesta del endpoint /medic/locations:",e),e||[])),i(e=>this.handleError("Failed to fetch locations",e)))}addLocation(e){return this.apiService.post(n.ADD,e).pipe(i(t=>this.handleError("Failed to create location",t)))}deleteLocation(e){return this.apiService.delete(n.DELETE(e)).pipe(i(t=>this.handleError(`Failed to delete location ${e}`,t)))}updateLocation(e,t){return this.apiService.put(n.UPDATE(e),t).pipe(i(r=>this.handleError(`Failed to update location ${e}`,r)))}handleError(e,t){this.logger.error(e,t);let r="An unexpected error occurred";if(t instanceof Error)r=t.message;else if(typeof t=="object"&&t!==null&&"status"in t){let a=t;switch(a.status){case 400:r=a.error?.detail??"Invalid request data";break;case 401:r=a.error?.detail??"Unauthorized access",this.storage.clearStorage();break;case 403:r=a.error?.detail??"Forbidden action";break;case 404:r=a.error?.detail??"Resource not found";break;default:r=a.error?.detail??"Server error"}}return s(()=>new Error(r))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=d({token:o,factory:o.\u0275fac,providedIn:"root"})};export{u as a};
