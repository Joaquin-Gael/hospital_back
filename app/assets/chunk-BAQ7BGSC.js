import{c as S,d as x,f,g as E,h as C}from"./chunk-RYO32FGU.js";import{a as G}from"./chunk-FG3VCKV6.js";import{a as K}from"./chunk-SLWJMPZV.js";import"./chunk-2KUBWO5M.js";import{a as N}from"./chunk-4W6XZAEZ.js";import"./chunk-LZ2CXPXV.js";import"./chunk-M3FKVPZN.js";import{a as I}from"./chunk-3F3ZFDNX.js";import{b as T,d as V}from"./chunk-7KU7TUXL.js";import"./chunk-AT6ZLWLU.js";import"./chunk-SHF7GFMJ.js";import{b as q,c as A,e as b,f as H,g as R,k as B,n as j,o as U,u as Y,w as J}from"./chunk-CXCZTUTO.js";import{$a as r,Fb as s,Kb as t,Lb as n,Mb as m,Rb as F,Rc as z,Sb as O,Zc as D,aa as u,ac as l,cc as k,kc as y,la as h,lb as L,ma as _,qb as d,zb as g}from"./chunk-U346BHW4.js";import"./chunk-4CLCTAJ7.js";var Q=e=>({error:e}),X=e=>({loading:e});function Z(e,i){if(e&1&&(t(0,"div",9),l(1),n()),e&2){let a=O();g("@fadeInOut",void 0),r(),k(" ",a.error," ")}}function $(e,i){e&1&&(t(0,"span",12),l(1,"*"),n())}function ee(e,i){e&1&&(t(0,"div"),l(1,"El correo es obligatorio"),n())}function oe(e,i){e&1&&(t(0,"div"),l(1,"Ingresa un correo v\xE1lido"),n())}function te(e,i){if(e&1&&(t(0,"div",9),d(1,ee,2,0,"div")(2,oe,2,0,"div"),n()),e&2){let a,o,c=O();r(),s(!((a=c.loginForm.get("email"))==null||a.errors==null)&&a.errors.required?1:-1),r(),s(!((o=c.loginForm.get("email"))==null||o.errors==null)&&o.errors.email?2:-1)}}function ne(e,i){e&1&&(t(0,"span",12),l(1,"*"),n())}function ie(e,i){e&1&&(h(),m(0,"path",22))}function re(e,i){e&1&&(h(),m(0,"path",23))}function le(e,i){e&1&&(t(0,"div"),l(1,"La contrase\xF1a es obligatoria"),n())}function ae(e,i){e&1&&(t(0,"div"),l(1,"La contrase\xF1a debe tener al menos 8 caracteres"),n())}function ce(e,i){if(e&1&&(t(0,"div",9),d(1,le,2,0,"div")(2,ae,2,0,"div"),n()),e&2){let a,o,c=O();r(),s(!((a=c.loginForm.get("password"))==null||a.errors==null)&&a.errors.required?1:-1),r(),s(!((o=c.loginForm.get("password"))==null||o.errors==null)&&o.errors.minlength?2:-1)}}function se(e,i){e&1&&(t(0,"span"),l(1,"Iniciar sesi\xF3n"),n())}function de(e,i){e&1&&m(0,"span",30)}var W=class e{fb=u(Y);authService=u(G);router=u(V);route=u(T);notificationService=u(K);logger=u(I);storage=u(N);loginForm=this.fb.group({email:["",[b.required,b.email]],password:["",[b.required,b.minLength(8)]],remember:[!1]});showPassword=!1;isLoading=!1;error=null;ngOnInit(){let i=this.storage.getRememberEmail();i&&this.loginForm.patchValue({email:i,remember:!0})}togglePassword(){this.showPassword=!this.showPassword}onLogin(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched(),this.error="Por favor complet\xE1 correctamente el email y la contrase\xF1a.";return}this.isLoading=!0,this.error=null;let{email:i,password:a,remember:o}=this.loginForm.value;o?this.storage.setRememberEmail(i):this.storage.removeRememberEmail();let c={email:i,password:a};this.authService.doctorLogin(c).subscribe({next:()=>{this.notificationService.success(`\xA1Inicio de sesi\xF3n exitoso!
 Redirigiendo...`,{duration:6e5,action:{label:"Cerrar",action:()=>this.notificationService.dismissAll()}}),this.isLoading=!1;let p=this.route.snapshot.queryParams.returnUrl||"/medic_panel/home";this.router.navigateByUrl(p)},error:p=>{this.logger.error("Doctor login failed",p),this.isLoading=!1,this.error=p.message||"Verific\xE1 tus credenciales."}})}static \u0275fac=function(a){return new(a||e)};static \u0275cmp=L({type:e,selectors:[["app-doctor-login"]],decls:49,vars:22,consts:[[1,"doctor-login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-container"],["viewBox","0 0 24 24","fill","currentColor",1,"medical-logo"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm4-9h-3V8c0-.55-.45-1-1-1s-1 .45-1 1v3H8c-.55 0-1 .45-1 1s.45 1 1 1h3v3c0 .55.45 1 1 1s1-.45 1-1v-3h3c.55 0 1-.45 1-1s-.45-1-1-1z"],[1,"login-title"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"error-message"],[1,"form-group",3,"ngClass"],["for","email",1,"form-label"],[1,"required-indicator"],[1,"input-container"],["viewBox","0 0 24 24","fill","currentColor",1,"input-icon"],["d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"],["id","email","type","email","formControlName","email","placeholder","Ingresa tu correo","autocomplete","email",1,"form-input"],["for","password",1,"form-label"],["d","M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"],["id","password","formControlName","password","placeholder","Ingresa tu contrase\xF1a","autocomplete","current-password",1,"form-input",3,"type"],["type","button",1,"password-toggle",3,"click"],["viewBox","0 0 24 24","fill","currentColor",1,"eye-icon"],["d","M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"],["d","M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 0 0 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"],[1,"form-options"],[1,"remember-me"],["type","checkbox","formControlName","remember",1,"checkbox"],[1,"checkbox-label"],["href","/forgot-password",1,"forgot-password"],["type","submit",1,"login-button",3,"disabled","ngClass"],[1,"spinner"],[1,"login-footer"],[1,"help-text"],["href","/contact",1,"help-link"]],template:function(a,o){if(a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),h(),t(4,"svg",4),m(5,"path",5),n()(),_(),t(6,"h2",6),l(7,"Equipo m\xE9dico"),n(),t(8,"p",7),l(9,"Esta secci\xF3n es s\xF3lo para el personal autorizado del Hospital, porfavor ingres\xE1 tus credenciales."),n()(),t(10,"form",8),F("ngSubmit",function(){return o.onLogin()}),d(11,Z,2,2,"div",9),t(12,"div",10)(13,"label",11),l(14," Correo electr\xF3nico "),d(15,$,2,0,"span",12),n(),t(16,"div",13),h(),t(17,"svg",14),m(18,"path",15),n(),_(),m(19,"input",16),n(),d(20,te,3,2,"div",9),n(),t(21,"div",10)(22,"label",17),l(23," Contrase\xF1a "),d(24,ne,2,0,"span",12),n(),t(25,"div",13),h(),t(26,"svg",14),m(27,"path",18),n(),_(),m(28,"input",19),t(29,"button",20),F("click",function(){return o.togglePassword()}),h(),t(30,"svg",21),d(31,ie,1,0,":svg:path",22)(32,re,1,0,":svg:path",23),n()()(),d(33,ce,3,2,"div",9),n(),_(),t(34,"div",24)(35,"label",25),m(36,"input",26),t(37,"span",27),l(38,"Recordame"),n()(),t(39,"a",28),l(40,"\xBFOlvidaste tu contrase\xF1a?"),n()(),t(41,"button",29),d(42,se,2,0,"span")(43,de,1,0,"span",30),n()(),t(44,"div",31)(45,"p",32),l(46," \xBFNecesitas ayuda? "),t(47,"a",33),l(48,"Cont\xE1ctanos"),n()()()()()),a&2){let c,p,v,w,M,P;g("@fadeInOut",void 0),r(),g("@slideInOut",void 0),r(9),g("formGroup",o.loginForm),r(),s(o.error?11:-1),r(),g("ngClass",y(16,Q,((c=o.loginForm.get("email"))==null?null:c.touched)&&((c=o.loginForm.get("email"))==null?null:c.invalid))),r(3),s((p=o.loginForm.get("email"))!=null&&p.hasError("required")&&((p=o.loginForm.get("email"))!=null&&p.touched)?15:-1),r(5),s((v=o.loginForm.get("email"))!=null&&v.touched&&((v=o.loginForm.get("email"))!=null&&v.invalid)?20:-1),r(),g("ngClass",y(18,Q,((w=o.loginForm.get("password"))==null?null:w.touched)&&((w=o.loginForm.get("password"))==null?null:w.invalid))),r(3),s((M=o.loginForm.get("password"))!=null&&M.hasError("required")&&((M=o.loginForm.get("password"))!=null&&M.touched)?24:-1),r(4),g("type",o.showPassword?"text":"password"),r(3),s(o.showPassword?32:31),r(2),s((P=o.loginForm.get("password"))!=null&&P.touched&&((P=o.loginForm.get("password"))!=null&&P.invalid)?33:-1),r(8),g("disabled",o.isLoading)("ngClass",y(20,X,o.isLoading))("@buttonState",o.isLoading?"loading":"idle"),r(),s(o.isLoading?43:42)}},dependencies:[J,B,A,q,H,R,j,U,D,z],styles:['[_nghost-%COMP%]{--primary-color: #1e88e5;--primary-color-light: rgb(98.5756972112, 172.2689243028, 236.9243027888);--primary-color-dark: rgb(18.9043824701, 95.9760956175, 163.5956175299);--secondary-color: #00897b;--error-color: #e53935;display:block;width:100%;height:100%}.doctor-login-container[_ngcontent-%COMP%]{display:flex;margin-top:80px;justify-content:center;align-items:center;min-height:100vh;padding:16px;background-color:#f5f7fa}.login-card[_ngcontent-%COMP%]{width:100%;max-width:450px;padding:32px;background-color:#fff;border-radius:12px;box-shadow:0 8px 24px #0000001a}@media (max-width: 480px){.login-card[_ngcontent-%COMP%]{padding:24px 16px}}.login-header[_ngcontent-%COMP%]{margin-bottom:32px;text-align:center}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:16px}.medical-logo[_ngcontent-%COMP%]{width:48px;height:48px;color:#1e88e5;padding:8px;border-radius:50%;background-color:#1e88e51a}.login-title[_ngcontent-%COMP%]{margin:0 0 8px;font-size:1.75rem;font-weight:600;color:#333}.login-subtitle[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:#757575}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.form-group.error[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{border-color:#e53935}.form-group.error[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 3px #e5393533}.form-group.error[_ngcontent-%COMP%]   .form-label[_ngcontent-%COMP%]{color:#e53935}.form-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:#333;display:flex;align-items:center;gap:4px}.required-indicator[_ngcontent-%COMP%]{color:#e53935}.input-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-icon[_ngcontent-%COMP%]{position:absolute;left:16px;width:20px;height:20px;color:#757575;pointer-events:none}.form-input[_ngcontent-%COMP%]{width:100%;padding:16px 16px 16px 64px;font-size:1rem;border:1px solid #e0e0e0;border-radius:8px;background-color:#fff;color:#333;transition:border-color .15s ease,box-shadow .15s ease}.form-input[_ngcontent-%COMP%]::placeholder{color:#9b9b9b}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1e88e5;box-shadow:0 0 0 3px #1e88e54d}.password-toggle[_ngcontent-%COMP%]{position:absolute;right:16px;background:none;border:none;cursor:pointer;color:#757575;display:flex;align-items:center;justify-content:center;padding:4px}.password-toggle[_ngcontent-%COMP%]:hover, .password-toggle[_ngcontent-%COMP%]:focus{color:#1e88e5;outline:none}.password-toggle[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{width:20px;height:20px}.error-message[_ngcontent-%COMP%]{font-size:.8rem;color:#e53935;margin-top:4px}.form-options[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}@media (max-width: 480px){.form-options[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:16px}}.remember-me[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox[_ngcontent-%COMP%]{appearance:none;width:18px;height:18px;border:1px solid #e0e0e0;border-radius:4px;background-color:#fff;cursor:pointer;position:relative}.checkbox[_ngcontent-%COMP%]:checked{background-color:#1e88e5;border-color:#1e88e5}.checkbox[_ngcontent-%COMP%]:checked:after{content:"";position:absolute;top:3px;left:6px;width:4px;height:8px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.checkbox[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1e88e54d}.checkbox-label[_ngcontent-%COMP%]{font-size:.9rem;color:#757575;cursor:pointer}.forgot-password[_ngcontent-%COMP%]{font-size:.9rem;color:#1e88e5;text-decoration:none;transition:color .15s ease}.forgot-password[_ngcontent-%COMP%]:hover, .forgot-password[_ngcontent-%COMP%]:focus{color:#1360a4;text-decoration:underline}.login-button[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%;padding:16px;font-size:1rem;font-weight:500;color:#fff;background-color:#1e88e5;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;height:48px}.login-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1360a4}.login-button[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 3px #1e88e54d}.login-button[_ngcontent-%COMP%]:disabled{opacity:.7;cursor:not-allowed}.login-button.loading[_ngcontent-%COMP%]{background-color:#63aced}.spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border-width:0}.login-footer[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.help-text[_ngcontent-%COMP%]{font-size:.9rem;color:#757575;margin:0}.help-link[_ngcontent-%COMP%]{color:#1e88e5;text-decoration:none;transition:color .15s ease}.help-link[_ngcontent-%COMP%]:hover, .help-link[_ngcontent-%COMP%]:focus{color:#1360a4;text-decoration:underline}'],data:{animation:[S("fadeInOut",[C(":enter",[f({opacity:0}),x("300ms ease-in",f({opacity:1}))]),C(":leave",[x("300ms ease-out",f({opacity:0}))])]),S("slideInOut",[C(":enter",[f({transform:"translateY(20px)",opacity:0}),x("400ms ease-out",f({transform:"translateY(0)",opacity:1}))])]),S("buttonState",[E("idle",f({backgroundColor:"var(--primary-color)"})),E("loading",f({backgroundColor:"var(--primary-color-light)"})),C("idle <=> loading",x("300ms ease-in-out"))])]}})};export{W as DoctorLoginComponent};
