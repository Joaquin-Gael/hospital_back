import{a as g,d as p}from"./chunk-3F3ZFDNX.js";import{a as u}from"./chunk-SHF7GFMJ.js";import{$ as l,C as a,W as m,m as i,q as d}from"./chunk-U346BHW4.js";var s={downloadTurnPdf:r=>`turns/${r}/pdf`,downloadTurnPdfAsAdmin:(r,o)=>`turns/user/pdf/${r}/${o}`,listMyTurnDocuments:"turns/documents/me",listMyTurnDocumentDownloads:"turns/documents/me/downloads"};var w=class r{constructor(o,e){this.apiService=o;this.logger=e}downloadMyTurnPdf(o,e="web"){let t={headers:new u({"x-download-channel":e}),responseType:"blob"};return this.logger.debug("Downloading turn PDF",{turnId:o,channel:e}),this.apiService.get(s.downloadTurnPdf(o),t).pipe(a(n=>(this.logger.error("Failed to download turn PDF",{turnId:o,error:n}),i(()=>n))))}downloadTurnPdfAsAdmin(o,e,t="web-admin"){let n={headers:new u({"x-download-channel":t}),responseType:"blob"};return this.logger.debug("Downloading turn PDF as admin",{userId:o,turnId:e,channel:t}),this.apiService.get(s.downloadTurnPdfAsAdmin(o,e),n).pipe(a(c=>(this.logger.error("Failed to download turn PDF as admin",{userId:o,turnId:e,error:c}),i(()=>c))))}listMyTurnDocuments(){return this.logger.debug("Loading generated turn documents"),this.apiService.get(s.listMyTurnDocuments).pipe(d(o=>o??[]),a(o=>(this.logger.error("Failed to load generated turn documents",o),i(()=>o))))}listMyTurnDocumentDownloads(){return this.logger.debug("Loading turn document download history"),this.apiService.get(s.listMyTurnDocumentDownloads).pipe(d(o=>o??[]),a(o=>(this.logger.error("Failed to load turn document download history",o),i(()=>o))))}static \u0275fac=function(e){return new(e||r)(l(p),l(g))};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};function O(r,o){if(!(r instanceof Blob))return;let e=o?.trim()?o.trim():`document-${Date.now()}`,t=URL.createObjectURL(r),n=document.createElement("a");n.href=t,n.download=e,n.rel="noopener",n.click(),URL.revokeObjectURL(t)}export{w as a,O as b};
