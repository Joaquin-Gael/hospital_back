import{a as D}from"./chunk-4W6XZAEZ.js";import{a as c,d as l}from"./chunk-3F3ZFDNX.js";import{C as n,W as m,aa as p,m as s,q as d}from"./chunk-U346BHW4.js";var o={GET_ALL:"medic/departments",GET_BY_ID:r=>`medic/departments/${r}`,ADD:"medic/departments/add",DELETE:r=>`medic/departments/delete/${r}`,UPDATE:r=>`medic/departments/update/${r}`};var E=class r{apiService=p(l);logger=p(c);storage=p(D);getDepartments(){return this.apiService.get(o.GET_ALL).pipe(d(e=>e||[]),n(e=>this.handleError("Failed to fetch departments",e)))}getDepartmentById(e){return this.apiService.get(o.GET_BY_ID(e)).pipe(n(t=>this.handleError(`Failed to fetch department ${e}`,t)))}addDepartment(e){return this.apiService.post(o.ADD,e).pipe(n(t=>this.handleError("Failed to create department",t)))}deleteDepartment(e){return this.apiService.delete(o.DELETE(e)).pipe(n(t=>this.handleError(`Failed to delete department ${e}`,t)))}updateDepartment(e,t){return this.apiService.patch(o.UPDATE(e),t).pipe(n(a=>this.handleError(`Failed to update department ${e}`,a)))}handleError(e,t){this.logger.error(e,t);let a="An unexpected error occurred";if(t instanceof Error)a=t.message;else if(typeof t=="object"&&t!==null&&"status"in t){let i=t;switch(i.status){case 400:a=i.error?.detail??"Invalid request data";break;case 401:a=i.error?.detail??"Unauthorized access",this.storage.clearStorage();break;case 403:a=i.error?.detail??"Forbidden action";break;case 404:a=i.error?.detail??"Resource not found";break;default:a=i.error?.detail??"Server error"}}return s(()=>new Error(a))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=m({token:r,factory:r.\u0275fac,providedIn:"root"})};export{E as a};
