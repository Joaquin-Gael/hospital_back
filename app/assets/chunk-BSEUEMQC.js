import{a as S}from"./chunk-R25INWIT.js";import{a as d,b as p}from"./chunk-YOZKJIIB.js";import{B as o,W as l,aa as n,m as v,p as c}from"./chunk-MFDETKI4.js";var s={GET_ALL:"medic/services/",CREATE:"medic/services/add/",GET_BY_ID:t=>`medic/services/${t}/`,UPDATE:t=>`medic/services/update/${t}/`,DELETE:t=>`medic/services/delete/${t}/`};var E=class t{apiService=n(p);logger=n(d);storage=n(S);getServices(){return this.apiService.get(s.GET_ALL).pipe(c(r=>r||[]),o(r=>this.handleError("Failed to fetch services",r)))}getServiceById(r){return this.apiService.get(s.GET_BY_ID(r)).pipe(c(e=>e),o(e=>this.handleError(`Failed to fetch service ${r}`,e)))}createService(r){return this.apiService.post(s.CREATE,r).pipe(c(e=>e),o(e=>this.handleError("Failed to create service",e)))}updateService(r,e){return this.apiService.patch(s.UPDATE(r),e).pipe(c(i=>i),o(i=>this.handleError(`Failed to update service ${r}`,i)))}deleteService(r){return this.apiService.delete(s.DELETE(r)).pipe(o(e=>this.handleError(`Failed to delete service ${r}`,e)))}handleError(r,e){this.logger.error(r,e);let i="Ocurri\xF3 un error inesperado. Por favor, intenta de nuevo.";if(e instanceof Error)i=e.message;else if(typeof e=="object"&&e!==null&&"status"in e){let a=e;switch(a.status){case 400:i=a.error?.detail??"Solicitud inv\xE1lida. Verifica los datos enviados.";break;case 401:i=a.error?.detail??"No autorizado. Sesi\xF3n expirada.",this.storage.clearStorage();break;case 403:i=a.error?.detail??"No tienes permisos para realizar esta acci\xF3n.";break;case 404:i=a.error?.detail??"Recurso no encontrado.";break;default:i=a.error?.detail??"Error interno del servidor. Contacta al soporte."}}return v(()=>new Error(i))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=l({token:t,factory:t.\u0275fac,providedIn:"root"})};export{E as a};
